(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const j=[{name:"Baking",dishSubtype:"Bake",form:"handheld",description:"The monks are skilled bakers, creating everything from fruit pies to fluffy buns in their stone ovens, often using airbending to ensure even cooking."},{name:"Steaming",dishSubtype:"Steam",form:"plated",description:"A gentle cooking method using aromatic steam to preserve the natural, subtle flavors and textures of vegetables and tofu."},{name:"Light Sauté",dishSubtype:"Stir-fry",form:"plated",description:"A quick stir in a hot wok with minimal oil, keeping vegetables crisp and vibrant while respecting their essence."},{name:"Simmering",dishSubtype:"Curry",form:"stew",description:"A slow, gentle cooking in liquid to meld flavors, perfect for creating rich curries and broths."},{name:"Piemaking",dishSubtype:"Pie",form:"pie",description:"A beloved pastime, creating savory or sweet pies with flaky, air-puffed crusts."},{name:"Minimalist Assembly",dishSubtype:"Salad",form:"salad",description:"A philosophy of using very little cooking, allowing the pure, inherent taste of the raw ingredients to be the focus of the meal."},{name:"Juicing",dishSubtype:"Juice",form:"beverage",description:"A simple process of extracting the vibrant, raw essence of fruits and some vegetables into a refreshing drink."}],E={nation:"air-nomads",dishEmojis:{"main-course":["🍲","🧆","🥘"],"side-dish":["🍚","🥣"],snack:["🥠","🥟"],dessert:["🥧","🍮","🥮"],"soup-stew":["🥣","🍲"],salad:["🥗","🥬"],beverage:["🧋","🍵","🥤"]},nameParts:{prefixes:["Soaring","Whispering","Monk Gyatso's","Meditative","Peaceful","Sky Temple","Four Winds","Silent"],middles:["Wind","Cloud","Spirit","Lotus","Mountain","Sunrise","Treetop","Pilgrim's"],suffixes:["Surprise","Delight","Special","Medley","Festival"]}},M=[{name:"Apple",emoji:"🍎",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","bake","salad","juice"],description:"A crisp, versatile fruit, often used in both pies and refreshing juices.",nation:"air-nomads",location:"Air Temple",synergies:{Flour:8,"Monk's Honey":5}},{name:"Banana",emoji:"🍌",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","bake","juice"],description:"A soft, sweet fruit that provides quick energy for long meditation sessions.",nation:"air-nomads",location:"Air Temple",synergies:{Flour:6,Vanilla:5}},{name:"Moon Peach",emoji:"🍑",rarity:"Rare",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","salad","garnish"],description:"A rare, mystical fruit said to bloom only under the full moon.",nation:"air-nomads",location:"Air Temple",synergies:{Vanilla:7,"Monk's Honey":5},loreSnippet:"The Moon Peach is said to grant wisdom to those who consume it during meditation under the full moon."},{name:"Lychee Nuts",emoji:"🥭",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["pie","salad","juice","garnish"],description:"Small, fragrant fruits with a delicate sweetness and floral aroma.",nation:"air-nomads",location:"Air Temple",synergies:{"Monk's Honey":5}},{name:"Mango",emoji:"🥭",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","curry","salad","juice"],description:"A tropical fruit with rich, sweet flesh perfect for both sweet and savory dishes.",nation:"air-nomads",location:"Air Temple",synergies:{Coconut:7}},{name:"Coconut",emoji:"🥥",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["pie","bake","curry"],description:"A versatile fruit providing both meat and milk for various culinary uses.",nation:"air-nomads",location:"Air Temple",synergies:{Mango:7}},{name:"Plums",emoji:"🫐",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["pie","bake","juice"],description:"Juicy, tart fruits that are often preserved or baked into pastries.",nation:"air-nomads",location:"Air Temple",synergies:{Flour:6}},{name:"Cabbage",emoji:"🥬",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["steam","stir-fry","curry","salad","dumpling"],description:"A leafy green that forms the base of many hearty Air Nomad dishes.",nation:"air-nomads",location:"Air Temple",synergies:{Tofu:7}},{name:"Carrot",emoji:"🥕",rarity:"Common",category:"vegetable",flavorProfile:"sweet",isPlural:!1,suitability:["steam","stir-fry","curry","salad","dumpling","bake","juice"],description:"A sweet root vegetable that adds color and crunch to meals.",nation:"air-nomads",location:"Air Temple",synergies:{Onion:5}},{name:"Bean Sprouts",emoji:"🌱",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!0,suitability:["steam","stir-fry","salad"],description:"Tender, crisp sprouts that add a fresh, clean flavor.",nation:"air-nomads",location:"Air Temple",synergies:{Tofu:4}},{name:"Onion",emoji:"🧅",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!1,suitability:["stir-fry","curry","dumpling","bake","pie"],description:"A foundational vegetable that adds savory depth to countless recipes.",nation:"air-nomads",location:"Air Temple",synergies:{Potato:7,Carrot:5}},{name:"Potato",emoji:"🥔",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["steam","curry","bake","pie"],description:"A starchy, comforting staple grown in high-altitude temple gardens.",nation:"air-nomads",location:"Air Temple",synergies:{Onion:7}},{name:"Tomato",emoji:"🍅",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["curry","salad","bake"],description:"A juicy, bright vegetable used in sauces, salads, and baked dishes.",nation:"air-nomads",location:"Air Temple",synergies:{Onion:5}},{name:"Pickles",emoji:"🥒",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["salad","garnish"],description:"Cucumbers preserved in a tangy brine, adding a sharp kick to meals.",nation:"air-nomads",location:"Air Temple"},{name:"Peppers",emoji:"🌶️",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["steam","stir-fry","curry","salad"],description:"A colorful vegetable that adds a mild, sweet heat.",nation:"air-nomads",location:"Air Temple"},{name:"Oyster Mushrooms",emoji:"🍄",rarity:"Common",category:"fungi",flavorProfile:"umami",isPlural:!0,suitability:["steam","stir-fry","curry","pie"],description:"Delicate, fan-shaped mushrooms with a subtle, savory flavor.",nation:"air-nomads",location:"Air Temple",synergies:{Tofu:5}},{name:"Shiitake Mushrooms",emoji:"🍄",rarity:"Uncommon",category:"fungi",flavorProfile:"umami",isPlural:!0,suitability:["steam","stir-fry","curry","pie","dumpling"],description:"Rich, meaty mushrooms prized for their deep umami flavor and medicinal properties.",nation:"air-nomads",location:"Air Temple",synergies:{Tofu:6}},{name:"Light Vegetable Broth",emoji:"🥣",rarity:"Common",category:"base",flavorProfile:"savory",isPlural:!1,suitability:["curry","steam"],description:"A clear, savory broth made from mountain vegetables, used as a base for soups and stews.",nation:"air-nomads",location:"Air Temple"},{name:"Rice",emoji:"🍚",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["steam","curry","stir-fry","salad","bake"],description:"The staple grain of Air Nomad cuisine, symbolizing simplicity and sustenance.",nation:"air-nomads",location:"Air Temple"},{name:"Barley",emoji:"🌾",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["steam","curry","bake"],description:"A hearty grain that provides warmth and nourishment during cold mountain nights.",nation:"air-nomads",location:"Air Temple"},{name:"Flour",emoji:"🌾",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["bake","pie","dumpling"],description:"Finely milled grain used for baking breads, pies, and dumplings.",nation:"air-nomads",location:"Air Temple",synergies:{Apple:8,Banana:6,Plums:6}},{name:"Mountain Noodles",emoji:"🍜",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["steam","stir-fry","curry"],description:"Simple, elegant noodles made from mountain spring water and flour.",nation:"air-nomads",location:"Air Temple"},{name:"Tofu",emoji:"⬜",rarity:"Common",category:"protein",flavorProfile:"neutral",isPlural:!1,suitability:["steam","stir-fry","curry","bake","salad","dumpling"],description:"Versatile soybean curd that absorbs the flavors of any dish.",nation:"air-nomads",location:"Air Temple",synergies:{Cabbage:7,"Oyster Mushrooms":5,"Shiitake Mushrooms":6,"Bean Sprouts":4}},{name:"Mung Beans",emoji:"🫘",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["curry","salad","steam"],description:"Small, nutritious legumes that sprout easily and provide essential protein.",nation:"air-nomads",location:"Air Temple"},{name:"Lentils of the Four Winds",emoji:"🫘",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["curry","bake","pie"],description:"Sacred legumes said to be blessed by the four winds, providing strength and wisdom.",nation:"air-nomads",location:"Air Temple"},{name:"Temple Nuts",emoji:"🌰",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["salad","bake","garnish"],description:"Nuts harvested from the sacred trees surrounding Air Nomad temples.",nation:"air-nomads",location:"Air Temple"},{name:"Garlic",emoji:"🧄",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["steam","stir-fry","curry","bake","pie","dumpling"],description:"A pungent bulb that adds depth and character to any dish.",nation:"air-nomads",location:"Air Temple"},{name:"Ginger",emoji:"🫚",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["steam","stir-fry","curry","bake","pie","dumpling","juice"],description:"A warming root that adds spice and aids digestion, valued for its medicinal properties.",nation:"air-nomads",location:"Air Temple"},{name:"Vanilla",emoji:"🍦",rarity:"Rare",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["bake","pie","juice"],description:"A rare, aromatic spice that adds subtle sweetness and complexity to desserts.",nation:"air-nomads",location:"Air Temple",synergies:{Banana:5,"Moon Peach":7}},{name:"Monk's Honey",emoji:"🍯",rarity:"Uncommon",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["bake","pie","juice","garnish"],description:"Pure honey collected by Air Nomad monks, said to contain the essence of mountain flowers.",nation:"air-nomads",location:"Air Temple",synergies:{Apple:5,"Lychee Nuts":5,"Moon Peach":5},loreSnippet:"Monk's Honey is collected only during sunrise meditation, when the flowers are said to be most pure and the air most still."},{name:"Bird's Eye Chili",emoji:"🌶️",rarity:"Rare",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["curry","stir-fry"],description:"A tiny, fiery chili that adds intense heat, used sparingly by the brave.",nation:"air-nomads",location:"Air Temple"},{name:"Ginseng",emoji:"🌿",rarity:"Uncommon",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["beverage","soup-stew"],description:"A powerful root known for its rejuvenating properties, often brewed into a stimulating tea.",nation:"air-nomads",location:"Air Temple"},{name:"Jasmine Flowers",emoji:"🌸",rarity:"Uncommon",category:"garnish",flavorProfile:"sweet",isPlural:!0,suitability:["beverage","garnish","salad"],description:"Fragrant blossoms used to infuse teas and desserts with a delicate, floral aroma.",nation:"air-nomads",location:"Air Temple"},{name:"Sky-Lemon",emoji:"🍋",rarity:"Common",category:"fruit",flavorProfile:"savory",isPlural:!1,suitability:["beverage","salad","garnish"],description:"A citrus fruit with a tart, refreshing flavor, grown in the sunny courtyards of the Air Temples.",nation:"air-nomads",location:"Air Temple"},{name:"Windflower Nectar",emoji:"💧",rarity:"Rare",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["beverage","dessert"],description:"A sweet, ambrosial liquid collected from the rare Windflower, perfect for sweetening drinks.",nation:"air-nomads",location:"Air Temple"},{name:"Cloud-Top Mint",emoji:"🍃",rarity:"Common",category:"garnish",flavorProfile:"pungent",isPlural:!1,suitability:["beverage","salad","garnish"],description:"A variety of mint that grows only at high altitudes, known for its crisp, cooling taste.",nation:"air-nomads",location:"Air Temple"},{name:"Steamed Kale",emoji:"🥬",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["salad","side-dish","steam"],description:"Hardy green leaves, lightly steamed to soften their texture while retaining nutrients. A staple in meditative meals.",nation:"air-nomads",location:"Air Temple"},{name:"Sun-Dried Tomatoes",emoji:"🍅",rarity:"Uncommon",category:"vegetable",flavorProfile:"umami",isPlural:!0,suitability:["salad","bake","garnish"],description:"Tomatoes dried in the mountain sun, concentrating their sweet and savory flavors.",nation:"air-nomads",location:"Air Temple"},{name:"Toasted Sesame Seeds",emoji:"🌰",rarity:"Common",category:"garnish",flavorProfile:"savory",isPlural:!0,suitability:["salad","garnish","stir-fry"],description:"Seeds toasted to bring out their nutty, rich flavor, often sprinkled over salads and noodle dishes.",nation:"air-nomads",location:"Air Temple"},{name:"Avocado",emoji:"🥑",rarity:"Uncommon",category:"fruit",flavorProfile:"savory",isPlural:!1,suitability:["salad","snack","beverage"],description:"A creamy, rich fruit that adds a smooth texture to salads and nutrient-dense smoothies.",nation:"air-nomads",location:"Air Temple"},{name:"Herbal Tea Leaves",emoji:"🫖",rarity:"Common",category:"flavoring",flavorProfile:"neutral",isPlural:!0,suitability:["beverage"],description:"A blend of calming herbs from the temple gardens, brewed into a meditative tea.",nation:"air-nomads",location:"Air Temple"},{name:"Dandelion Greens",emoji:"🌿",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!0,suitability:["salad","steam"],description:"Slightly bitter greens foraged from the mountainside, prized for their detoxifying properties.",nation:"air-nomads",location:"Air Temple"},{name:"Cucumber",emoji:"🥒",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["salad","beverage"],description:"A crisp, hydrating vegetable that adds a refreshing quality to salads and infused water.",nation:"air-nomads",location:"Air Temple"}],B=[{name:"Stewing",dishSubtype:"Stew",form:"stew",description:"A slow simmering of ingredients in a single pot, creating a hearty, communal meal to share against the cold."},{name:"Poaching",dishSubtype:"Poach",form:"plated",description:"A gentle cooking method in seasoned sea-broth, preserving the delicate texture of fish and sea-prunes."},{name:"Grilling",dishSubtype:"Grill",form:"skewer",description:"Cooking over an open flame, fueled by whale oil, giving a smoky char to meats and vegetables."},{name:"Curing",dishSubtype:"Cure",form:"handheld",description:"A preservation technique using sea salt and tundra herbs to create savory, long-lasting dried meats and fish."},{name:"Freezing",dishSubtype:"Freeze",form:"plated",description:"Using waterbending to flash-freeze sweet creams and berries into delightful, icy desserts."},{name:"Boiling",dishSubtype:"Boil",form:"stew",description:"A simple and efficient method to cook roots, meats, and kelp in bubbling water."},{name:"Brewing",dishSubtype:"Brew",form:"beverage",description:"Steeping rare herbs and flowers from the tundra or Spirit Oasis to create warming or spiritual teas."},{name:"Minimalist Assembly",dishSubtype:"Salad",form:"salad",description:"A simple preparation method for fresh seaweed and tundra greens, allowing their natural flavors to shine."}],R={nation:"water-tribe",dishEmojis:{"main-course":["🐟","🍢","🦀"],"side-dish":["🍜","🌿","🥣"],snack:["🥩","🍤"],dessert:["🍧","🧊","🥮"],"soup-stew":["🍲","🥣"],salad:["🌿","🥗"],beverage:["🧉","🍵"]},nameParts:{prefixes:["Arctic","Southern","Moon Spirit's","Tidal","Glacial","Hunter's","Icy","Deep Sea"],middles:["Wave","Ice","Seal","Tundra","Spirit","Pearl","Coral","Midnight"],suffixes:["Feast","Catch","Bounty","Stew","Delight","Broth","Jerky"]}},G=[{name:"Sea Prunes",emoji:"🐙",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["stew","poach","boil"],description:"A staple of the Southern Water Tribe, these small, tender cephalopods are a primary source of protein.",nation:"water-tribe",location:"Water Tribe",synergies:{Kelp:7,"Thick Blubber Broth":10}},{name:"Arctic Hen",emoji:"🐧",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill"],description:"A flightless bird whose meat is rich and hearty, perfect for warming stews.",nation:"water-tribe",location:"Water Tribe"},{name:"Tiger Seal",emoji:"🦭",rarity:"Uncommon",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill","cure"],description:"A prized catch, providing tough but flavorful meat that is often cured for long voyages.",nation:"water-tribe",location:"Water Tribe"},{name:"Moon-gilled Salmon",emoji:"🐟",rarity:"Rare",category:"protein",flavorProfile:"umami",isPlural:!1,suitability:["poach","grill"],description:"A beautiful fish whose gills shimmer with moonlight, known for its delicate, buttery flavor.",nation:"water-tribe",location:"Water Tribe",synergies:{"Glacier Mint":8},loreSnippet:"The Moon-gilled Salmon is said to swim only during the full moon, when its gills glow with an ethereal light that guides Waterbenders to the best fishing spots."},{name:"Glacier Shrimp",emoji:"🦐",rarity:"Common",category:"protein",flavorProfile:"sweet",isPlural:!0,suitability:["poach","stew","boil"],description:"Small, sweet shrimp found in the frigid waters beneath glaciers, sometimes dried into powder.",nation:"water-tribe",location:"Water Tribe"},{name:"Giant Sea Crab",emoji:"🦀",rarity:"Rare",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","boil"],description:"A delicacy of the Northern Water Tribe, considered by many to be the most sought-after food in the Northern Sea.",nation:"water-tribe",location:"Water Tribe"},{name:"Platypus Bear",emoji:"🐻",rarity:"Legendary",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill"],description:"An enormous and dangerous beast, served whole only at the grandest of Northern Water Tribe feasts.",nation:"water-tribe",location:"Water Tribe"},{name:"Squid",emoji:"🦑",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["stew","boil"],description:"A common catch used in many popular soups and stews across both tribes.",nation:"water-tribe",location:"Water Tribe"},{name:"Kelp",emoji:"🌿",rarity:"Common",category:"vegetable",flavorProfile:"umami",isPlural:!1,suitability:["poach","stew","boil","salad"],description:"Versatile sea-vegetable used for noodles, wraps, and seasoning.",nation:"water-tribe",location:"Water Tribe",synergies:{"Sea Prunes":7}},{name:"Sea Salt Root",emoji:"🥔",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["stew","grill","boil"],description:"A starchy root vegetable that grows in coastal soil, naturally infused with a mild saltiness.",nation:"water-tribe",location:"Water Tribe"},{name:"Tundra Berries",emoji:"🫐",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["stew","garnish","cure"],description:"Hardy, tart berries that add a burst of acidity to rich, savory stews.",nation:"water-tribe",location:"Water Tribe"},{name:"Ice-crystal Lettuce",emoji:"🥬",rarity:"Uncommon",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["salad"],description:"A crisp, pale lettuce that thrives in the cold, with a texture like biting into fresh snow.",nation:"water-tribe",location:"Water Tribe"},{name:"Dandelion Greens",emoji:"🌱",rarity:"Uncommon",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["garnish","salad"],description:"Bitter greens used as a garnish to cut through the richness of blubber and fatty meats.",nation:"water-tribe",location:"Water Tribe"},{name:"Taro Root",emoji:"🍠",rarity:"Rare",category:"vegetable",flavorProfile:"sweet",isPlural:!1,suitability:["stew","boil","freeze"],description:"A sweet, starchy root grown in the Spirit Oasis, used to make a paste for mooncakes.",nation:"water-tribe",location:"Water Tribe"},{name:"Seaweed Noodles",emoji:"🍜",rarity:"Common",category:"base",flavorProfile:"umami",isPlural:!0,suitability:["stew","boil","poach"],description:"Slippery, savory noodles made from processed kelp, a staple in brothy dishes.",nation:"water-tribe",location:"Water Tribe"},{name:"Pearl-grain Rice",emoji:"🍚",rarity:"Uncommon",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["stew","poach","boil"],description:"A short-grain, sticky rice traded from the Earth Kingdom, considered a luxury.",nation:"water-tribe",location:"Generic"},{name:"Thick Blubber Broth",emoji:"🥣",rarity:"Common",category:"base",flavorProfile:"savory",isPlural:!1,suitability:["stew","poach"],description:"A rich, high-energy broth made from rendered seal blubber, essential for survival.",nation:"water-tribe",location:"Water Tribe",synergies:{"Sea Prunes":10}},{name:"Imported Flour",emoji:"🌾",rarity:"Uncommon",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["bake"],description:"A luxury from the Earth Kingdom, used to make special breads and cookies after the War.",nation:"water-tribe",location:"Generic"},{name:"Snow Plums",emoji:"🍑",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["freeze","brew"],description:"Sweet, pale plums that have a unique, icy crunch when eaten raw.",nation:"water-tribe",location:"Water Tribe"},{name:"Polar Berries",emoji:"🍓",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["freeze","brew"],description:"Extremely sweet berries used to make frozen desserts and sweet drinks.",nation:"water-tribe",location:"Water Tribe"},{name:"Arctic Cloudberries",emoji:"🫐",rarity:"Rare",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["freeze","brew"],description:"Golden-orange berries that grow close to the ground, prized for their unique tart-sweet flavor.",nation:"water-tribe",location:"Water Tribe"},{name:"Sweetened Seal Milk",emoji:"🥛",rarity:"Common",category:"dairy",flavorProfile:"sweet",isPlural:!1,suitability:["freeze","brew"],description:"Rich, creamy milk used as the base for most Water Tribe frozen desserts.",nation:"water-tribe",location:"Water Tribe"},{name:"Glacier Salt",emoji:"🧂",rarity:"Common",category:"flavoring",flavorProfile:"savory",isPlural:!1,suitability:["poach","stew","grill","cure","boil"],description:"Coarse salt harvested from ancient glacial deposits.",nation:"water-tribe",location:"Water Tribe"},{name:"Tundra Herbs",emoji:"🌿",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!0,suitability:["stew","grill","cure"],description:"A mix of hardy, aromatic herbs that grow on the sparse tundra.",nation:"water-tribe",location:"Water Tribe"},{name:"Whale Oil",emoji:"💧",rarity:"Common",category:"flavoring",flavorProfile:"umami",isPlural:!1,suitability:["grill","stew"],description:"A rich, savory oil used for cooking and fueling lamps, defining the smoky taste of grilled foods.",nation:"water-tribe",location:"Water Tribe"},{name:"Butterfly Pea Flower",emoji:"🌸",rarity:"Legendary",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["brew"],description:"A rare flower from the Spirit Oasis, its extract is used in spiritual teas, turning them a beautiful blue.",nation:"water-tribe",location:"Water Tribe"},{name:"Glacier Mint",emoji:"🍃",rarity:"Uncommon",category:"garnish",flavorProfile:"sweet",isPlural:!1,suitability:["freeze","garnish","brew"],description:"A potent mint that provides a cooling sensation, often used in drinks and desserts.",nation:"water-tribe",location:"Water Tribe",synergies:{"Moon-gilled Salmon":8}},{name:"Sea-Kelp Salad Base",emoji:"🥗",rarity:"Common",category:"vegetable",flavorProfile:"umami",isPlural:!1,suitability:["salad"],description:"A mix of tender, young kelp and other seaweeds, serving as a common base for chilled salads.",nation:"water-tribe",location:"Water Tribe"},{name:"Pickled Sea Prunes",emoji:"🐙",rarity:"Uncommon",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["salad","garnish"],description:"Young sea prunes pickled in a salty brine, adding a chewy texture and savory flavor to salads.",nation:"water-tribe",location:"Water Tribe"},{name:"Arctic Willow Leaves",emoji:"🌿",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!0,suitability:["salad","beverage","stew"],description:"The young leaves of the arctic willow, edible and slightly bitter, often used in salads or brewed as a tea.",nation:"water-tribe",location:"Water Tribe"},{name:"Meltwater",emoji:"💧",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["beverage","soup-stew"],description:"Pure, clean water sourced directly from melting glaciers, the foundation of all Water Tribe beverages.",nation:"water-tribe",location:"Water Tribe"},{name:"Iced Nectar",emoji:"🍹",rarity:"Uncommon",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["beverage"],description:"A sweet, non-alcoholic drink made from a blend of polar berry juices, served ice-cold.",nation:"water-tribe",location:"Water Tribe"},{name:"Spirit Oasis Water",emoji:"💧",rarity:"Legendary",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["beverage","soup-stew"],description:"Sacred water from the Spirit Oasis in the North Pole, said to have healing properties.",nation:"water-tribe",location:"Water Tribe",loreSnippet:"The Spirit Oasis Water never freezes, even in the coldest winters, and is said to contain the essence of the Moon and Ocean spirits themselves."},{name:"Frozen Moss",emoji:"🧊",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["salad","garnish"],description:"Edible tundra moss, flash-frozen with waterbending to create a crunchy, cold salad topping.",nation:"water-tribe",location:"Water Tribe"},{name:"Sea-Ice Radish",emoji:"🌶️",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!1,suitability:["salad","garnish"],description:"A crisp, peppery radish that grows in the icy soil of the tundra, sliced thin for salads.",nation:"water-tribe",location:"Water Tribe"},{name:"Blubber-Cured Fish",emoji:"🐟",rarity:"Uncommon",category:"protein",flavorProfile:"umami",isPlural:!1,suitability:["salad","snack"],description:"Fish cured and preserved in seal blubber, providing a rich, smoky flavor perfect for adding protein to a cold salad.",nation:"water-tribe",location:"Water Tribe"}],W=[{name:"Roasting",dishSubtype:"Roast",form:"roast",description:"A slow-cooking method using the dry, powerful heat of an earth or stone oven to tenderize meats and vegetables."},{name:"Stir-frying",dishSubtype:"Stir-fry",form:"plated",description:"A fast, high-heat technique from the streets of Ba Sing Se, tossing ingredients in a hot wok with savory sauces."},{name:"Braising",dishSubtype:"Braise",form:"stew",description:"A combination method of searing ingredients before simmering them slowly in a flavorful liquid, resulting in incredibly tender dishes."},{name:"Dumpling Making",dishSubtype:"Dumpling",form:"dumpling",description:"The intricate art of wrapping savory fillings in a delicate dough, which can then be steamed, boiled, or pan-fried."},{name:"Baking",dishSubtype:"Bake",form:"handheld",description:"Used to create a vast array of goods, from simple breads for travelers to the elaborate cakes and tarts of the Upper Ring."},{name:"Congee Making",dishSubtype:"Congee",form:"congee",description:"A slow, patient simmering of rice in a large amount of water, creating a thick, comforting porridge known as Jook."},{name:"Pickling",dishSubtype:"Pickle",form:"plated",description:"A preservation method using salt and vinegar to create tangy, crisp vegetables that last for seasons."},{name:"Steaming",dishSubtype:"Steam",form:"plated",description:"A gentle method used to cook delicate fish, vegetables, and filled buns, preserving their natural texture and flavor."},{name:"Minimalist Assembly",dishSubtype:"Salad",form:"salad",description:"Preparing fresh, crisp vegetables with a simple dressing, a common practice for quick meals in the countryside."},{name:"Brewing",dishSubtype:"Brew",form:"beverage",description:"The art of steeping leaves, such as ginseng or jasmine, in hot water to create the nation's most beloved beverage: tea."}],q={nation:"earth-kingdom",dishEmojis:{"main-course":["🍖","🥡","🍚"],"side-dish":["🥬","🥦","🥢"],snack:["🥟","🥠","🍢"],dessert:["🥮","🍡","🍮"],"soup-stew":["🍲","🥣"],salad:["🥗","🥒"],beverage:["🫖","🍵"]},nameParts:{prefixes:["Ba Sing Se","Omashu","Kyoshi","Jade","Earthen","Sturdy","Golden","Granite"],middles:["Wall","Rock","Badger-mole","Crystal","Ginseng","Rice","Merchant's","Farmer's"],suffixes:["Feast","Special","Stir-fry","Dumpling","Delight","Bao","Jook"]}},H=[{name:"Pork Belly",emoji:"🥓",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["roast","braise","stir-fry"],description:"A rich, fatty cut of meat, often slow-braised until it is meltingly tender.",nation:"earth-kingdom",location:"Ba Sing Se",synergies:{"Bok Choy":10,"Soy Sauce":8}},{name:"Chicken",emoji:"🍗",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["roast","braise","stir-fry","congee"],description:"A versatile meat found on farms across the kingdom, used in countless dishes.",nation:"earth-kingdom",location:"Generic",synergies:{Scallions:6}},{name:"Ground Meat",emoji:"🥩",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["dumpling","stir-fry"],description:"A mixture of seasoned ground meats, perfect for filling dumplings and bao.",nation:"earth-kingdom",location:"Generic",synergies:{Scallions:5,"Dumpling Wrappers":8}},{name:"River Fish",emoji:"🐟",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["braise","stir-fry","steam"],description:"Freshwater fish from the kingdom's many rivers, often braised with ginger and soy.",nation:"earth-kingdom",location:"Generic",synergies:{"Soy Sauce":8,Scallions:6}},{name:"Kyoshi Elephant Koi",emoji:"🎏",rarity:"Legendary",category:"protein",flavorProfile:"umami",isPlural:!1,suitability:["roast","braise","steam"],description:"A massive, revered fish from Kyoshi Island, its seared flesh is a gourmet delicacy.",nation:"earth-kingdom",location:"Kyoshi Island",loreSnippet:"The Kyoshi Elephant Koi is said to be as old as the island itself, and catching one is considered a sign of great fortune and skill.",synergies:{"Soy Sauce":8}},{name:"Duck",emoji:"🦆",rarity:"Uncommon",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["roast","braise"],description:"Often roasted whole until the skin is crisp, a celebratory dish in Ba Sing Se.",nation:"earth-kingdom",location:"Ba Sing Se",synergies:{Scallions:7}},{name:"Platypus Bear Egg",emoji:"🥚",rarity:"Rare",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["congee","stir-fry"],description:"An enormous egg with a rich yolk, large enough to be a meal in itself.",nation:"earth-kingdom",location:"Generic"},{name:"Tofu",emoji:"⬜",rarity:"Common",category:"protein",flavorProfile:"neutral",isPlural:!1,suitability:["stir-fry","braise","dumpling","congee"],description:"Made from soybeans, a versatile protein that absorbs the flavor of the sauces it's cooked in.",nation:"earth-kingdom",location:"Generic",synergies:{"Bok Choy":6,"Soy Sauce":5}},{name:"Bok Choy",emoji:"🥬",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["stir-fry","braise","dumpling","steam"],description:"A crisp, leafy green with a mild, sweet flavor, a staple in stir-fries.",nation:"earth-kingdom",location:"Ba Sing Se",synergies:{"Pork Belly":10,Tofu:6}},{name:"Taro Root",emoji:"🍠",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["roast","braise","congee","bake"],description:"A starchy root vegetable, providing a hearty and satisfying element to any meal.",nation:"earth-kingdom",location:"Generic"},{name:"Bamboo Shoots",emoji:"🎋",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!0,suitability:["stir-fry","braise","dumpling"],description:"Young, tender shoots with a crisp texture and delicate flavor.",nation:"earth-kingdom",location:"Generic"},{name:"Scallions",emoji:"🌱",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!0,suitability:["stir-fry","dumpling","congee","garnish"],description:"A key aromatic, adding a sharp, fresh onion flavor to everything it touches.",nation:"earth-kingdom",location:"Generic",synergies:{Chicken:6,Duck:7,"River Fish":6,"Ground Meat":5}},{name:"Jicama",emoji:"🥔",rarity:"Uncommon",category:"vegetable",flavorProfile:"sweet",isPlural:!1,suitability:["stir-fry","salad"],description:"A crunchy, juicy root vegetable that is often eaten raw or lightly cooked.",nation:"earth-kingdom",location:"Si Wong Desert"},{name:"Pickled Cabbage",emoji:"🥬",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["pickle","garnish","side-dish"],description:"Cabbage preserved in a tangy brine, a staple side dish providing a sharp contrast to rich meats.",nation:"earth-kingdom",location:"Generic"},{name:"Cabbage",emoji:"🥬",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["stir-fry","dumpling","congee"],description:"The humble and resilient staple of the common folk, used in everything from soups to buns.",nation:"earth-kingdom",location:"Generic"},{name:"Lotus Root",emoji:"🌸",rarity:"Uncommon",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["stir-fry","salad","braise"],description:"A beautiful, crunchy root with a lacy pattern, symbolizing purity.",nation:"earth-kingdom",location:"Generic"},{name:"Kale",emoji:"🌿",rarity:"Uncommon",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["stir-fry","salad","bake"],description:"A sturdy green, famously used in the modern, gourmet cuisine of Zaofu.",nation:"earth-kingdom",location:"Zaofu"},{name:"White Rice",emoji:"🍚",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["stir-fry","braise","congee","side-dish","steam"],description:"The foundational grain of the Earth Kingdom, served with nearly every meal.",nation:"earth-kingdom",location:"Generic"},{name:"Dumpling Wrappers",emoji:"🥟",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["dumpling"],description:"Thin sheets of dough, ready to be filled with savory mixtures and cooked.",nation:"earth-kingdom",location:"Generic",synergies:{"Ground Meat":8}},{name:"Rich Meat Broth",emoji:"🥣",rarity:"Common",category:"base",flavorProfile:"savory",isPlural:!1,suitability:["braise","congee"],description:"A deep, flavorful broth made from simmering bones and aromatics for hours.",nation:"earth-kingdom",location:"Generic"},{name:"Egg Noodles",emoji:"🍜",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["stir-fry","braise"],description:"Hearty, chewy noodles enriched with egg, perfect for soaking up savory sauces.",nation:"earth-kingdom",location:"Generic"},{name:"Flour",emoji:"🌾",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["bake","dumpling"],description:"A basic necessity for making breads, buns, and pastries.",nation:"earth-kingdom",location:"Generic"},{name:"Light Vegetable Broth",emoji:"🥣",rarity:"Common",category:"base",flavorProfile:"savory",isPlural:!1,suitability:["braise","congee"],description:"A clear, savory broth made from vegetables, used as a base for soups and stews.",nation:"earth-kingdom",location:"Generic"},{name:"Sticky Rice",emoji:"🍚",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["congee","side-dish"],description:"Short-grain rice that becomes sticky when cooked, popular in the Lower Ring.",nation:"earth-kingdom",location:"Ba Sing Se"},{name:"Egg Custard",emoji:"🍮",rarity:"Common",category:"dairy",flavorProfile:"sweet",isPlural:!1,suitability:["dessert"],description:"A sweet, creamy dessert made from eggs and milk.",nation:"earth-kingdom",location:"Generic"},{name:"Lotus Seeds",emoji:"🌰",rarity:"Rare",category:"garnish",flavorProfile:"sweet",isPlural:!0,suitability:["dessert","garnish"],description:"Seeds from the lotus flower, used as a garnish or snack.",nation:"earth-kingdom",location:"Generic"},{name:"Five-Spice Powder",emoji:"🧂",rarity:"Rare",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["braise","roast","dumpling"],description:"A blend of spices used to season meats and dumplings.",nation:"earth-kingdom",location:"Generic"},{name:"Fermented Bean Paste",emoji:"🫘",rarity:"Common",category:"flavoring",flavorProfile:"umami",isPlural:!1,suitability:["braise","stir-fry"],description:"A salty, umami paste used to add depth to sauces and stews.",nation:"earth-kingdom",location:"Generic"},{name:"Chili Oil",emoji:"🌶️",rarity:"Uncommon",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["dumpling","stir-fry"],description:"Spicy oil used as a condiment or for cooking.",nation:"earth-kingdom",location:"Generic"},{name:"Pickled Mustard Greens",emoji:"🥬",rarity:"Uncommon",category:"garnish",flavorProfile:"savory",isPlural:!0,suitability:["garnish","side-dish"],description:"Tangy, salty greens used as a garnish or side.",nation:"earth-kingdom",location:"Generic"},{name:"Red Bean Paste",emoji:"🫘",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["dumpling","bake"],description:"A sweet, rich paste made from adzuki beans, used as a filling in many desserts.",nation:"earth-kingdom",location:"Generic"},{name:"Moon Peach",emoji:"🍑",rarity:"Rare",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["bake","dessert"],description:"A legendary fruit from the hills of the Lower Ring, used in special occasion cakes.",nation:"earth-kingdom",location:"Ba Sing Se"},{name:"Lychee",emoji:"🥭",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["dessert","beverage","bake"],description:"A sweet, floral fruit used in fine desserts and the crust of egg tarts.",nation:"earth-kingdom",location:"Generic"},{name:"Egg Custard",emoji:"🍮",rarity:"Common",category:"dairy",flavorProfile:"sweet",isPlural:!1,suitability:["bake"],description:"A sweet, creamy custard that forms the filling of the famous Ba Sing Se egg tarts.",nation:"earth-kingdom",location:"Ba Sing Se"},{name:"Ginseng",emoji:"🪵",rarity:"Rare",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["braise","congee","beverage"],description:"A prized root known for its restorative properties and strong, earthy flavor.",nation:"earth-kingdom",location:"Generic"},{name:"Soy Sauce",emoji:"🫙",rarity:"Common",category:"flavoring",flavorProfile:"umami",isPlural:!1,suitability:["stir-fry","braise","dumpling"],description:"The essential savory seasoning of the Earth Kingdom, brewed from fermented soybeans.",nation:"earth-kingdom",location:"Generic",synergies:{"Pork Belly":8,"River Fish":8,Tofu:5}},{name:"Ginger",emoji:"🫚",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["stir-fry","braise","congee","beverage"],description:"A sharp, spicy root used to add warmth and complexity to nearly any dish.",nation:"earth-kingdom",location:"Generic"},{name:"Honey",emoji:"🍯",rarity:"Common",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["bake","dessert","beverage"],description:"A natural sweetener from the kingdom's wildflower meadows, used to sweeten cakes and teas.",nation:"earth-kingdom",location:"Generic"},{name:"Jennamite",emoji:"💎",rarity:"Legendary",category:"garnish",flavorProfile:"sweet",isPlural:!1,suitability:["dessert","garnish"],description:"A fast-growing rock candy from the caves of Omashu. A dangerous but delicious garnish.",nation:"earth-kingdom",location:"Generic"},{name:"Ginseng Tea",emoji:"🫖",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["beverage"],description:"A common, invigorating tea brewed from ginseng root, enjoyed by scholars and laborers alike.",nation:"earth-kingdom",location:"Ba Sing Se"},{name:"Lychee Juice",emoji:"🧃",rarity:"Uncommon",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["beverage"],description:"A sweet, aromatic juice pressed from fresh lychees, often served chilled.",nation:"earth-kingdom",location:"Generic"},{name:"Mixed Greens",emoji:"🥗",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!0,suitability:["salad"],description:"A base of various fresh, crisp lettuces and greens from the fertile farmlands.",nation:"earth-kingdom",location:"Generic"},{name:"Cucumber",emoji:"🥒",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["salad","garnish"],description:"A crunchy, hydrating vegetable, often sliced thin and added to salads for a refreshing bite.",nation:"earth-kingdom",location:"Generic"},{name:"Radish",emoji:"🔴",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!1,suitability:["salad","pickle","garnish"],description:"A crisp, peppery root vegetable that adds a sharp flavor and vibrant color to salads.",nation:"earth-kingdom",location:"Generic"},{name:"Rice Vinegar",emoji:"🍶",rarity:"Common",category:"flavoring",flavorProfile:"savory",isPlural:!1,suitability:["salad","pickle"],description:"A mild, slightly sweet vinegar used to make dressings for salads and pickling brines.",nation:"earth-kingdom",location:"Generic"},{name:"Peanuts",emoji:"🥜",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!0,suitability:["salad","garnish","stir-fry"],description:"Roasted and often crushed, peanuts add a savory crunch to salads and noodle dishes.",nation:"earth-kingdom",location:"Generic"},{name:"Plum Wine",emoji:"🍷",rarity:"Uncommon",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["beverage","braise"],description:"A sweet, fragrant wine made from fermented plums, served as a drink or used in cooking.",nation:"earth-kingdom",location:"Generic"},{name:"Bean Sprout Salad",emoji:"🌱",rarity:"Common",category:"vegetable",flavorProfile:"neutral",isPlural:!1,suitability:["salad","side-dish"],description:"A simple salad of blanched bean sprouts dressed with a light, savory sauce.",nation:"earth-kingdom",location:"Ba Sing Se"},{name:"Water Chestnuts",emoji:"🌰",rarity:"Common",category:"vegetable",flavorProfile:"sweet",isPlural:!0,suitability:["salad","stir-fry","dumpling"],description:"Aquatic vegetables that remain crisp even after cooking, adding a crunchy texture to salads.",nation:"earth-kingdom",location:"Generic"}],x=[{name:"Grilling",dishSubtype:"Grill",form:"skewer",description:"Cooking over precisely controlled hot coals, searing meats and vegetables to perfection with a signature smoky flavor."},{name:"Roasting",dishSubtype:"Roast",form:"roast",description:"Using the intense, dry heat of a volcanic-stone oven to cook large cuts of meat or whole komodo chickens."},{name:"Wok-frying",dishSubtype:"Wok-fry",form:"plated",description:"A high-speed, high-heat method that uses minimal oil to create intensely flavorful and spicy dishes."},{name:"Steaming",dishSubtype:"Steam",form:"plated",description:"A disciplined technique using steam to gently cook delicate fish and dumplings, often infused with spices."},{name:"Simmering",dishSubtype:"Simmer",form:"stew",description:"Slowly cooking ingredients in a spiced broth or sauce, allowing flavors to meld and deepen over time."},{name:"Baking",dishSubtype:"Bake",form:"handheld",description:"Creating perfectly uniform fire cakes, tarts, and buns in meticulously heated ovens."},{name:"Minimalist Assembly",dishSubtype:"Salad",form:"salad",description:"A rare but potent dish, typically featuring sliced fire chilies and other bold ingredients served raw to test one's mettle."},{name:"Brewing",dishSubtype:"Brew",form:"beverage",description:"Creating powerful, often spicy, teas and tonics intended to invigorate the body and spirit before firebending."}],U={nation:"fire-nation",dishEmojis:{"main-course":["🔥","🍖","🌶️"],"side-dish":["🍜","🍚","🥢"],snack:["🍢","🍘","🥟"],dessert:["🍰","🍮","🍒"],"soup-stew":["🍲","🥣"],salad:["🌶️","🥗"],beverage:["🍹","🧉"]},nameParts:{prefixes:["Ember Island","Royal","Volcanic","Sun Warrior's","Blazing","Imperial","Dragon's","Obsidian"],middles:["Flame","Ash","Soot","Caldera","Spire","Magma","Phoenix","Inferno"],suffixes:["Flakes","Feast","Roast","Sizzle","Delight","Skewer","Fury"]}},O=[{name:"Komodo Rhino",emoji:"🦏",rarity:"Uncommon",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["roast","grill","simmer"],description:"A tough, powerful beast whose meat is often made into sausages or roasted for feasts.",nation:"fire-nation",location:"Fire Nation Capital",synergies:{"Fire Chili":10},loreSnippet:"The Komodo Rhino is revered for its strength and resilience, qualities that are said to transfer to those who consume its meat."},{name:"Komodo Chicken",emoji:"🐔",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["roast","grill","wok-fry"],description:"A common bird in the Fire Nation, often roasted whole or served on skewers.",nation:"fire-nation",location:"Fire Nation Capital",synergies:{"Fire Chili":7}},{name:"Bangus Fish",emoji:"🐟",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["wok-fry","steam"],description:"A staple fish from the coastal waters, typically fried until crisp.",nation:"fire-nation",location:"Generic"},{name:"Sea Slug",emoji:"🐌",rarity:"Uncommon",category:"protein",flavorProfile:"umami",isPlural:!1,suitability:["grill","steam"],description:"A delicacy from Shu Jing, often smoked over hot coals to achieve a chewy, savory texture.",nation:"fire-nation",location:"Generic"},{name:"Hippo-ox",emoji:"🐂",rarity:"Common",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["roast","grill"],description:"A large, hearty animal providing tough but flavorful meat for roasts and skewers.",nation:"fire-nation",location:"Generic"},{name:"Fertilized Turtle Duck Egg",emoji:"🥚",rarity:"Rare",category:"protein",flavorProfile:"savory",isPlural:!1,suitability:["steam","simmer"],description:"A controversial delicacy enjoyed by some Fire Nation nobility.",nation:"fire-nation",location:"Generic"},{name:"Fire Chili",emoji:"🌶️",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!1,suitability:["roast","grill","wok-fry","simmer","steam","salad"],description:"The defining ingredient of the nation's cuisine, used to bring intense heat and flavor.",nation:"fire-nation",location:"Generic",synergies:{"Komodo Rhino":10,"Komodo Chicken":7},loreSnippet:"It is said that a true Firebender can tell the quality of the chili by the intensity of their inner heat."},{name:"Ash Banana",emoji:"🍌",rarity:"Uncommon",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["bake","roast"],description:"A savory, starchy banana that grows in volcanic soil, often baked into breads.",nation:"fire-nation",location:"Ember Island"},{name:"Tomato-Carrot",emoji:"🥕",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["wok-fry","simmer","roast"],description:"A hybrid vegetable with the sweetness of a carrot and the acidity of a tomato.",nation:"fire-nation",location:"Generic"},{name:"Scallion",emoji:"🌱",rarity:"Common",category:"vegetable",flavorProfile:"pungent",isPlural:!0,suitability:["wok-fry","garnish","steam"],description:"Used ubiquitously as an aromatic finisher, adding a sharp, bright flavor.",nation:"fire-nation",location:"Generic"},{name:"Peas",emoji:"🫛",rarity:"Common",category:"vegetable",flavorProfile:"sweet",isPlural:!0,suitability:["wok-fry","simmer"],description:"Small, sweet peas that add a pop of color and texture to rice and noodle dishes.",nation:"fire-nation",location:"Generic"},{name:"Sorghum",emoji:"🌾",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["simmer","bake"],description:"A hardy, ancient grain that can be cooked into a porridge or ground into flour.",nation:"fire-nation",location:"Generic"},{name:"Millet",emoji:"🌾",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["roast","bake"],description:"A small grain often toasted to create a nutty, satisfying travel snack.",nation:"fire-nation",location:"Generic"},{name:"Rice",emoji:"🍚",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["steam","wok-fry","simmer"],description:"The staple grain, steamed perfectly to accompany spicy dishes.",nation:"fire-nation",location:"Generic"},{name:"Fire Noodles",emoji:"🍜",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["wok-fry","simmer"],description:"Chewy wheat noodles, often served extra spicy for breakfast.",nation:"fire-nation",location:"Fire Nation Capital"},{name:"Fire-Proof Dough",emoji:"🍞",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["bake"],description:"A special dough used for making fire cakes and other pastries that can withstand intense heat.",nation:"fire-nation",location:"Fire Nation Capital"},{name:"Dragon Paw Fruit",emoji:"🐲",rarity:"Rare",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["dessert"],description:"A sweet, juicy fruit with a spiny shell, resembling a dragon's paw.",nation:"fire-nation",location:"Fire Nation Capital"},{name:"Ember Island Cherries",emoji:"🍒",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!0,suitability:["dessert","bake"],description:"Sweet and tart cherries grown exclusively on Ember Island, perfect for making ice cream.",nation:"fire-nation",location:"Ember Island",synergies:{"Sweet Cream":10}},{name:"Star Apple",emoji:"⭐",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["dessert"],description:"A fruit with toxic skin but incredibly sweet, star-patterned flesh.",nation:"fire-nation",location:"Fire Nation Capital"},{name:"Sweet Cream",emoji:"🍦",rarity:"Common",category:"dairy",flavorProfile:"sweet",isPlural:!1,suitability:["dessert"],description:"A rich cream used as a base for ice creams and a topping for hotcakes.",nation:"fire-nation",location:"Ember Island",synergies:{"Ember Island Cherries":10}},{name:"Togarashi Spice",emoji:"🌶️",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["grill","roast","wok-fry","simmer"],description:"A spicy blend used to season grilled and roasted foods.",nation:"fire-nation",location:"Generic"},{name:"Garlic",emoji:"🧄",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["wok-fry","simmer","roast"],description:"A pungent bulb used as a base for many Fire Nation dishes.",nation:"fire-nation",location:"Generic"},{name:"Ginger",emoji:"🫚",rarity:"Uncommon",category:"flavoring",flavorProfile:"savory",isPlural:!1,suitability:["wok-fry","steam","roast"],description:"A spicy root used to add warmth and depth to dishes.",nation:"fire-nation",location:"Generic"},{name:"Palm Sugar",emoji:"🍬",rarity:"Common",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["dessert","bake"],description:"A sweetener made from palm sap, used in desserts and sauces.",nation:"fire-nation",location:"Generic"},{name:"Flaming Fire Flakes",emoji:"🔥",rarity:"Common",category:"garnish",flavorProfile:"pungent",isPlural:!0,suitability:["garnish","snack"],description:"Crispy, spicy flakes used as a topping or snack.",nation:"fire-nation",location:"Generic"},{name:"Sea Slug Paste",emoji:"🌶️",rarity:"Common",category:"flavoring",flavorProfile:"umami",isPlural:!1,suitability:["garnish","flavoring"],description:"A fermented, pungent paste made from sea slugs, used sparingly to add deep umami flavor.",nation:"fire-nation",location:"Generic"},{name:"Spiced Tomato Juice",emoji:"🧃",rarity:"Common",category:"flavoring",flavorProfile:"savory",isPlural:!1,suitability:["beverage"],description:"The juice of sun-ripened tomatoes mixed with a blend of mild Fire Nation spices, served chilled.",nation:"fire-nation",location:"Generic"},{name:"Volcanic Glass Noodles",emoji:"🍜",rarity:"Uncommon",category:"base",flavorProfile:"neutral",isPlural:!0,suitability:["salad","soup-stew"],description:"Translucent, chewy noodles made from sweet potato starch, often served cold in salads.",nation:"fire-nation",location:"Fire Nation Capital"},{name:"Ember-Roasted Peppers",emoji:"🌶️",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!0,suitability:["salad","garnish"],description:"Sweet peppers roasted directly in embers until the skin is blackened and the flesh is tender. A smoky salad component.",nation:"fire-nation",location:"Ember Island"},{name:"Blackened Snake-Cucumber",emoji:"🥒",rarity:"Common",category:"vegetable",flavorProfile:"savory",isPlural:!1,suitability:["salad"],description:"A long, thin cucumber with dark skin, grilled lightly to impart a smoky flavor before being added to salads.",nation:"fire-nation",location:"Generic"},{name:"Dragonfruit",emoji:"🐲",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["salad","beverage","dessert"],description:"A visually stunning fruit with a mild sweetness, its vibrant pink flesh is often used in fruit salads and drinks.",nation:"fire-nation",location:"Ember Island"},{name:"Passionfruit",emoji:"🍓",rarity:"Common",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["beverage","dessert","garnish"],description:"A tart, aromatic fruit whose pulp is used to flavor a variety of sweet drinks and desserts.",nation:"fire-nation",location:"Generic"},{name:"Chili-Lime Seasoning",emoji:"🧂",rarity:"Common",category:"flavoring",flavorProfile:"pungent",isPlural:!1,suitability:["salad","garnish"],description:"A classic Fire Nation seasoning blend of dried chili powder and lime zest, perfect for sprinkling over fresh fruit and salads.",nation:"fire-nation",location:"Generic"},{name:"Hibiscus Tea",emoji:"🌺",rarity:"Common",category:"flavoring",flavorProfile:"sweet",isPlural:!1,suitability:["beverage"],description:"A tart, crimson-colored tea made from dried hibiscus flowers, served either hot or iced.",nation:"fire-nation",location:"Fire Nation Capital"},{name:"Shaved Ice",emoji:"🍧",rarity:"Common",category:"base",flavorProfile:"neutral",isPlural:!1,suitability:["dessert","beverage"],description:"Finely shaved ice used as a base for many refreshing treats, often topped with sweet syrups.",nation:"fire-nation",location:"Ember Island"},{name:"Charred Pineapple",emoji:"🍍",rarity:"Uncommon",category:"fruit",flavorProfile:"sweet",isPlural:!1,suitability:["salad","dessert","grill"],description:"Pineapple slices grilled until caramelized and smoky, adding a sweet and tangy element to savory salads.",nation:"fire-nation",location:"Ember Island"}],P={Common:1,Uncommon:2,Rare:3,Legendary:4};function D(e,i){const{fusionData:t,primaryIngredient:a,cookingStyle:n,dishType:r,allIngredients:d,theme:s}=i;if("dishTypes"in e&&e.dishTypes&&!e.dishTypes.includes(r)||"styles"in e&&e.styles&&!e.styles.includes(n.name)||"compatibleForms"in e&&e.compatibleForms&&!e.compatibleForms.includes(n.form)||"themes"in e&&e.themes&&!e.themes.includes(s)||"fusion"in e&&e.fusion&&t.selectedNations.length<2||"nations"in e&&e.nations&&Array.isArray(e.nations)&&!e.nations.every(o=>t.selectedNations.includes(o))||"nations"in e&&e.nations&&typeof e.nations=="object"&&!Array.isArray(e.nations)&&!t.selectedNations.some(o=>e.nations[o])||"minNations"in e&&e.minNations&&t.selectedNations.length<e.minNations||"maxNations"in e&&e.maxNations&&t.selectedNations.length>e.maxNations||"minIngredients"in e&&e.minIngredients&&d.length<e.minIngredients||"maxIngredients"in e&&e.maxIngredients&&d.length>e.maxIngredients)return!1;const c=Math.max(...d.map(o=>P[o.rarity]));return!("minRarity"in e&&e.minRarity&&c<P[e.minRarity]||"noMeat"in e&&e.noMeat&&d.some(l=>l.category==="protein"&&l.flavorProfile!=="neutral"))}const b=e=>{if(e.length!==0)return e[Math.floor(Math.random()*e.length)]},z=[{id:"republic_city_market",title:e=>`Republic City Market ${e.cookingStyle.dishSubtype}`,description:"A popular street food found in the bustling markets where all cultures meet.",weighting:{fusion:!0,minNations:2,dishTypes:["snack","main-course"]}},{id:"iroh_jasmine_dragon",title:e=>`Jasmine Dragon's ${b(["Secret","Finest","Special"])||"Special"} ${e.primaryIngredient.name}`,description:"A specialty from Iroh's famous tea shop, blending techniques from his travels.",weighting:{fusion:!0,minNations:2,ingredients:["Ginseng","Lychee","Tea Leaves"]}},{id:"colonial_fusion",title:e=>`Colonial ${e.cookingStyle.dishSubtype} with ${e.primaryIngredient.name}`,description:"A dish originating from the former Fire Nation colonies, a true blend of two powerful cultures.",weighting:{fusion:!0,nations:["fire-nation","earth-kingdom"]}},{id:"aang_summit_feast",title:e=>`Avatar Aang's Unity Feast ${b(["Bao","Roast","Salad"])||"Bao"}`,description:"Inspired by the feasts held by Avatar Aang to promote harmony among the nations after the war.",weighting:{fusion:!0,minNations:3,themes:["Ceremonial & Celebratory"]}},{id:"southern_reconstruction_stew",title:e=>"Southern Reconstruction Stew",description:"A hearty meal created during the rebuilding of the Southern Water Tribe, using Earth Kingdom staples to supplement traditional polar ingredients.",weighting:{fusion:!0,nations:["water-tribe","earth-kingdom"],dishTypes:["soup-stew"]}},{id:"ba_sing_se_university",title:e=>`Ba Sing Se University ${e.cookingStyle.dishSubtype}`,description:"A scholarly dish created by university chefs experimenting with cultural exchange.",weighting:{fusion:!0,minNations:2,dishTypes:["main-course","dessert"]}},{id:"avatar_kyoshi_festival",title:e=>`Avatar Kyoshi Festival ${e.primaryIngredient.name}`,description:"A celebratory dish served during festivals honoring Avatar Kyoshi's legacy.",weighting:{fusion:!0,minNations:2,themes:["Ceremonial & Celebratory"]}},{id:"white_lotus_society",title:e=>`White Lotus Society ${e.cookingStyle.dishSubtype}`,description:"A refined dish shared among the secretive White Lotus Society members.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}},{id:"emerald_city_trade",title:e=>`Emerald City Trade Route ${e.primaryIngredient.name}`,description:"A dish that evolved along the bustling trade routes connecting the four nations.",weighting:{fusion:!0,minNations:2,themes:["Invigorating & Playful"]}},{id:"air_temple_meditation",title:e=>`Air Temple Meditation ${e.cookingStyle.dishSubtype}`,description:"A peaceful dish served during meditation sessions at the Air Temples.",weighting:{fusion:!0,minNations:2,themes:["Humble & Meditative"]}},{id:"fire_nation_coronation",title:e=>`Fire Nation Coronation ${e.primaryIngredient.name}`,description:"A royal dish prepared for coronation ceremonies in the Fire Nation.",weighting:{fusion:!0,minNations:2,themes:["Ceremonial & Celebratory"]}},{id:"water_tribe_ice_festival",title:e=>`Water Tribe Ice Festival ${e.cookingStyle.dishSubtype}`,description:"A festive dish served during the annual ice festivals of the Water Tribes.",weighting:{fusion:!0,minNations:2,themes:["Ceremonial & Celebratory"]}},{id:"earth_kingdom_harvest",title:e=>`Earth Kingdom Harvest ${e.primaryIngredient.name}`,description:"A bountiful dish celebrating the rich harvests of the Earth Kingdom.",weighting:{fusion:!0,minNations:2,themes:["Humble & Meditative"]}},{id:"southern_reconstruction",title:e=>"Southern Reconstruction Stew",description:"A hearty meal created during the reconstruction of the Southern Water Tribe, using Earth Kingdom staples to supplement traditional ingredients.",weighting:{fusion:!0,nations:["water-tribe","earth-kingdom"],dishTypes:["soup-stew"]}},{id:"sun_warrior_pilgrimage",title:e=>"Sun Warrior Pilgrim's Roast",description:"A dish prepared by those who make the difficult journey to the ancient Sun Warrior civilization, combining Fire Nation discipline with ancient traditions.",weighting:{fusion:!0,nations:["fire-nation"],themes:["Ancient & Traditional"]}},{id:"pro_bending_arena_snack",title:e=>`Pro-Bending Arena ${e.cookingStyle.dishSubtype}`,description:"A high-energy meal sold outside the Pro-Bending Arena in Republic City, combining quick Fire Nation cooking with hearty Earth Kingdom ingredients.",weighting:{fusion:!0,nations:["fire-nation","earth-kingdom"],dishTypes:["snack","main-course"]}},{id:"misty_palms_oasis_cooler",title:e=>"Misty Palms Oasis Cooler",description:"A refreshing dish created by members of the Order of the White Lotus at their oasis stronghold, using Water Tribe freezing techniques on desert fruits.",weighting:{fusion:!0,nations:["water-tribe","earth-kingdom"],dishTypes:["dessert","beverage"]}},{id:"ember_island_vacation_treat",title:e=>"Ember Island Vacation Treat",description:"When the world opened up, Ember Island became a top tourist spot. Local vendors began mixing traditional Fire Nation sweets with exotic Air Nomad fruits.",weighting:{fusion:!0,nations:["fire-nation","air-nomads"],dishTypes:["dessert"]}}],K=[{id:"balance_in_a_bowl",title:e=>"Balance in a Bowl",description:"A dish designed to represent the spiritual balance between the elements.",weighting:{fusion:!0,minNations:4}},{id:"four_nations_medley",title:e=>"Four-Nations Medley",description:"A harmonious blend of ingredients and techniques from across the world.",weighting:{fusion:!0,minNations:4}},{id:"unity_noodles",title:e=>"Unity Noodles",description:"A symbol of cooperation, where ingredients from different nations come together in a single, satisfying dish.",weighting:{fusion:!0,minNations:2,ingredients:["Mountain Noodles","Seaweed Noodles","Egg Noodles"]}},{id:"elemental_harmony",title:e=>`Elemental Harmony ${e.cookingStyle.dishSubtype}`,description:"A dish that seeks to find the common ground between different elemental philosophies.",weighting:{fusion:!0,minNations:2,themes:["Humble & Meditative"]}},{id:"the_avatar_special",title:e=>"The Avatar's Special",description:"A complex dish that only a true master of all culinary elements could create.",weighting:{fusion:!0,minNations:3}},{id:"diplomats_luncheon",title:e=>"Diplomat's Luncheon",description:"A light but respectable meal, designed to be inoffensive and pleasing to dignitaries from all nations.",weighting:{fusion:!0,minNations:2,dishTypes:["side-dish","salad"]}},{id:"harmony_blend",title:e=>`Harmony Blend ${e.cookingStyle.dishSubtype}`,description:"A dish that embodies the balance between different elements and cultures.",weighting:{fusion:!0,minNations:2,themes:["Humble & Meditative"]}},{id:"elemental_fusion",title:e=>`Elemental Fusion ${e.primaryIngredient.name}`,description:"A dish that represents the unity of the four elements in perfect balance.",weighting:{fusion:!0,minNations:4,themes:["Ceremonial & Celebratory"]}},{id:"spirit_world_essence",title:e=>`Spirit World Essence ${e.cookingStyle.dishSubtype}`,description:"A dish inspired by the mystical energies of the Spirit World.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}},{id:"avatar_state_awakening",title:e=>`Avatar State Awakening ${e.primaryIngredient.name}`,description:"A dish that captures the moment when all elements unite in perfect harmony.",weighting:{fusion:!0,minNations:3,themes:["Ceremonial & Celebratory"]}},{id:"cosmic_balance",title:e=>`Cosmic Balance ${e.cookingStyle.dishSubtype}`,description:"A dish that reflects the eternal dance between order and chaos in the universe.",weighting:{fusion:!0,minNations:2,themes:["Humble & Meditative"]}},{id:"eternal_flame_water",title:e=>`Eternal Flame Water ${e.primaryIngredient.name}`,description:"A dish that symbolizes the impossible union of fire and water elements.",weighting:{fusion:!0,nations:["fire-nation","water-tribe"],themes:["Invigorating & Playful"]}},{id:"earth_sky_meditation",title:e=>`Earth-Sky Meditation ${e.cookingStyle.dishSubtype}`,description:"A dish that bridges the grounded nature of earth with the freedom of air.",weighting:{fusion:!0,nations:["earth-kingdom","air-nomads"],themes:["Humble & Meditative"]}},{id:"yin_yang_harmony",title:e=>`Yin-Yang Harmony ${e.primaryIngredient.name}`,description:"A dish that embodies the ancient philosophy of complementary opposites.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}},{id:"primal_essence",title:e=>`Primal Essence ${e.cookingStyle.dishSubtype}`,description:"A dish that connects to the most fundamental forces of nature.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}},{id:"unity_manifestation",title:e=>`Unity Manifestation ${e.primaryIngredient.name}`,description:"A dish that represents the coming together of all nations in peace.",weighting:{fusion:!0,minNations:3,themes:["Ceremonial & Celebratory"]}},{id:"balance_of_elements",title:e=>`Balance of the Elements ${e.cookingStyle.dishSubtype}`,description:"A dish designed to represent the spiritual balance between different elemental philosophies.",weighting:{fusion:!0,minNations:3}},{id:"four_nations_harmony",title:e=>`Four-Nations Harmony ${b(["Medley","Bowl","Feast"])||"Medley"}`,description:"A harmonious blend of ingredients and techniques from across the world, celebrating global unity.",weighting:{fusion:!0,minNations:4}},{id:"pan_national_unity",title:e=>"Pan-National Unity Noodles",description:"A symbol of cooperation, where noodles from different cultures are brought together in a single, satisfying dish.",weighting:{fusion:!0,minNations:2,ingredients:["Mountain Noodles","Seaweed Noodles","Egg Noodles"]}},{id:"avatar_special_enhanced",title:e=>`The Avatar's ${e.primaryIngredient.name} Special`,description:"A complex dish that only a true master of all culinary elements could create.",weighting:{fusion:!0,minNations:3}},{id:"diplomats_luncheon_enhanced",title:e=>"The Diplomat's Luncheon",description:"A light but respectable meal, designed to be inoffensive and pleasing to dignitaries from all nations.",weighting:{fusion:!0,minNations:2,dishTypes:["side-dish","salad"],themes:["Ceremonial & Celebratory"]}}],A={"air-nomads":"Soaring","water-tribe":"Tidal","earth-kingdom":"Earthen","fire-nation":"Blazing"},J=[{id:"golden_sunset_blend",title:e=>`Golden Sunset Blend ${e.cookingStyle.dishSubtype}`,description:"A dish that captures the warm, golden light of sunset over the Fire Nation.",weighting:{fusion:!0,nations:["fire-nation"],themes:["Invigorating & Playful"]}},{id:"misty_mountain_medley",title:e=>`Misty Mountain Medley ${e.primaryIngredient.name}`,description:"A dish inspired by the fog-shrouded peaks of the Earth Kingdom mountains.",weighting:{fusion:!0,nations:["earth-kingdom"],themes:["Humble & Meditative"]}},{id:"crystal_ice_harmony",title:e=>`Crystal Ice Harmony ${e.cookingStyle.dishSubtype}`,description:"A dish that reflects the pristine beauty of Water Tribe ice formations.",weighting:{fusion:!0,nations:["water-tribe"],themes:["Ancient & Traditional"]}},{id:"floating_cloud_delight",title:e=>`Floating Cloud Delight ${e.primaryIngredient.name}`,description:"A dish that embodies the lightness and freedom of Air Nomad culture.",weighting:{fusion:!0,nations:["air-nomads"],themes:["Humble & Meditative"]}},{id:"emerald_jade_fusion",title:e=>`Emerald Jade Fusion ${e.cookingStyle.dishSubtype}`,description:"A dish that combines the rich green hues of Earth Kingdom jade with other elements.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}},{id:"crimson_flame_water",title:e=>`Crimson Flame Water ${e.primaryIngredient.name}`,description:"A dish that marries the intensity of fire with the fluidity of water.",weighting:{fusion:!0,nations:["fire-nation","water-tribe"],themes:["Invigorating & Playful"]}},{id:"azure_sky_earth",title:e=>`Azure Sky Earth ${e.cookingStyle.dishSubtype}`,description:"A dish that bridges the vast blue sky with the solid foundation of earth.",weighting:{fusion:!0,nations:["air-nomads","earth-kingdom"],themes:["Humble & Meditative"]}},{id:"golden_amber_blend",title:e=>`Golden Amber Blend ${e.primaryIngredient.name}`,description:"A dish that captures the warm, honeyed tones of autumn harvests.",weighting:{fusion:!0,minNations:2,themes:["Ceremonial & Celebratory"]}},{id:"silver_moonlight_essence",title:e=>`Silver Moonlight Essence ${e.cookingStyle.dishSubtype}`,description:"A dish that reflects the mystical silver light of the moon over the Spirit World.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}},{id:"ruby_sunrise_special",title:e=>`Ruby Sunrise Special ${e.primaryIngredient.name}`,description:"A dish that celebrates the brilliant red dawn of a new day across all nations.",weighting:{fusion:!0,minNations:3,themes:["Ceremonial & Celebratory"]}},{id:"hyphenated_style",title:e=>{const i=A[e.fusionData.selectedNations[0]],t=A[e.fusionData.selectedNations[1]];return`${i}-${t} ${e.cookingStyle.dishSubtype}`},description:"A direct fusion of two distinct national styles.",weighting:{fusion:!0,minNations:2,maxNations:2}},{id:"technique_focus",title:e=>`${e.fusionData.selectedNations[0].split("-")[0]} Style ${e.cookingStyle.name}`,description:"Applying a traditional cooking method to ingredients from another land.",weighting:{fusion:!0,minNations:2}},{id:"ingredient_spotlight",title:e=>`Spiced ${e.primaryIngredient.name} with a ${e.fusionData.selectedNations[1].split("-")[0]} Twist`,description:"A dish that highlights a key ingredient prepared with foreign spices and techniques.",weighting:{fusion:!0,minNations:2}},{id:"cross_cultural_dumpling",title:e=>"Four-Elements Dumpling",description:"A dumpling whose filling contains a signature ingredient from each of the four nations.",weighting:{fusion:!0,minNations:4,dishTypes:["snack"]}},{id:"fusion_broth",title:e=>"Republic City Broth Bowl",description:"A complex broth combining the flavor bases of multiple nations.",weighting:{fusion:!0,minNations:2,dishTypes:["soup-stew"]}},{id:"unexpected_pairing",title:e=>`${e.primaryIngredient.name} and ${e.secondaryIngredient.name} Skewers`,description:"An unusual but delicious pairing of ingredients from different corners of the world.",weighting:{fusion:!0,minNations:2}}],V=[{id:"zuko_honor_quest",title:e=>`Zuko's Redemption ${e.cookingStyle.dishSubtype}`,description:"A dish of conflicting flavors that ultimately find harmony, much like the Fire Lord's journey.",weighting:{fusion:!0,nations:["fire-nation"],minNations:2,themes:["Humble & Meditative"]}},{id:"katara_healing_arts",title:e=>`Katara's Healing ${b(["Broth","Tea","Congee","Soup"])||"Broth"}`,description:"A comforting meal combining the restorative herbs of one culture with the nourishing bases of another.",weighting:{fusion:!0,nations:["water-tribe"],dishTypes:["soup-stew","beverage"]}},{id:"sokka_invention",title:e=>`Sokka's "Strategic" Meat-and-Veggie Surprise`,description:"A highly practical, if unconventional, combination of whatever could be found and cooked quickly. For the strategist on the go!",weighting:{fusion:!0,minNations:2,themes:["Invigorating & Playful"]}},{id:"toph_earthly_delight",title:e=>`Toph's Unpretentious ${e.primaryIngredient.name} Plate`,description:"A no-frills dish that combines solid, dependable ingredients. It might not look fancy, but it's got substance.",weighting:{fusion:!0,nations:["earth-kingdom"]}},{id:"aang_vegetarian_innovation",title:e=>`Aang's Vegetarian ${e.cookingStyle.dishSubtype}`,description:"A creative dish that respects Air Nomad vegetarian principles while incorporating bold flavors from other cultures.",weighting:{fusion:!0,nations:["air-nomads"],minNations:2,noMeat:!0}},{id:"iroh_tea_house_experiment",title:e=>`Iroh's Tea House ${e.primaryIngredient.name} Special`,description:"A dish created in Iroh's tea house, combining traditional comfort food with exotic Fire Nation techniques.",weighting:{fusion:!0,nations:["earth-kingdom","fire-nation"],themes:["Humble & Meditative"]}},{id:"suki_kyoshi_warrior_training",title:e=>`Suki's Training ${e.cookingStyle.dishSubtype}`,description:"A dish designed to provide the perfect balance of nutrition and energy for intensive Kyoshi Warrior training sessions.",weighting:{fusion:!0,nations:["earth-kingdom"],minNations:2,themes:["Invigorating & Playful"]}},{id:"azula_perfection_obsession",title:e=>`Azula's Perfectionist ${e.primaryIngredient.name}`,description:"A dish representing the attempt to create the ultimate fusion cuisine, combining the most prestigious elements of multiple nations.",weighting:{fusion:!0,nations:["fire-nation"],minNations:2}},{id:"mai_detached_elegance",title:e=>`Mai's Detached Elegance ${e.cookingStyle.dishSubtype}`,description:"A sophisticated dish that appears simple but contains hidden complexity, much like the character herself.",weighting:{fusion:!0,nations:["fire-nation"],minNations:2,themes:["Ceremonial & Celebratory"]}},{id:"ty_lee_cheerful_acrobatics",title:e=>`Ty Lee's Cheerful ${e.primaryIngredient.name} Medley`,description:"A bright, energetic dish that combines unexpected ingredients in a way that somehow just works.",weighting:{fusion:!0,nations:["fire-nation"],minNations:2,themes:["Invigorating & Playful"]}},{id:"jet_freedom_fighter",title:e=>`Jet's Freedom Fighter ${e.cookingStyle.dishSubtype}`,description:"A hearty, practical meal that could be prepared quickly in the wilderness, combining Earth Kingdom staples with whatever could be foraged.",weighting:{fusion:!0,nations:["earth-kingdom"],minNations:2,themes:["Invigorating & Playful"]}},{id:"long_feng_conspiracy",title:e=>`Long Feng's Secret ${e.primaryIngredient.name}`,description:"A dish that appears to be one thing but contains hidden elements from other cultures, much like the Dai Li's secretive nature.",weighting:{fusion:!0,nations:["earth-kingdom"],minNations:2,themes:["Ancient & Traditional"]}}],Y=[{id:"poetic_elemental_essence",title:e=>`${b(["Whispering","Dancing","Sleeping"])} ${e.primaryIngredient.name}`,description:"A name that reflects the gentle, almost spiritual nature of the primary ingredient.",weighting:{fusion:!1,nations:["air-nomads","water-tribe"],themes:["Humble & Meditative"]}},{id:"poetic_earth_and_sky",title:e=>`${b(["Sky","Sun","Cloud"])} meets ${b(["Stone","Root","Clay"])}`,description:"A fusion name symbolizing the connection between the sky-faring Air Nomads and the grounded Earth Kingdom.",weighting:{fusion:!0,minNations:2,nations:["air-nomads","earth-kingdom"]}},{id:"poetic_volcano_heart",title:e=>"Heart of the Volcano",description:"A name for a dish of unparalleled spiciness and intensity.",weighting:{fusion:!1,nations:["fire-nation"],ingredients:["Fire Chili","Togarashi Spice"]}},{id:"poetic_sea_and_flame",title:e=>"Sea and Flame in a Bowl",description:"A name representing the elemental clash and harmony between Water and Fire.",weighting:{fusion:!0,minNations:2,nations:["water-tribe","fire-nation"]}},{id:"poetic_four_corners",title:e=>"Taste of the Four Corners",description:"A name reserved for a complex dish that incorporates elements from every nation.",weighting:{fusion:!0,minNations:4}},{id:"poetic_moonlight_serenade",title:e=>"Moonlight Serenade",description:"A name for dishes that are best enjoyed under the light of the moon, often featuring delicate flavors.",weighting:{fusion:!1,nations:["water-tribe"],themes:["Humble & Meditative"]}},{id:"poetic_dragon_whisper",title:e=>"Dragon's Whisper",description:"A name for dishes that carry the ancient wisdom and power of the dragons, often featuring rare or legendary ingredients.",weighting:{fusion:!1,nations:["fire-nation"],themes:["Ancient & Traditional"]}},{id:"poetic_wind_song",title:e=>"Song of the Wind",description:"A name that captures the free-spirited nature of the Air Nomads, often for light and airy dishes.",weighting:{fusion:!1,nations:["air-nomads"],themes:["Humble & Meditative"]}},{id:"poetic_earth_mother",title:e=>"Earth Mother's Embrace",description:"A name for hearty, comforting dishes that feel like a warm embrace from the earth itself.",weighting:{fusion:!1,nations:["earth-kingdom"],themes:["Humble & Meditative"]}},{id:"poetic_spirit_world_echo",title:e=>"Echo of the Spirit World",description:"A name for dishes that seem to bridge the gap between the physical and spiritual realms.",weighting:{fusion:!0,minNations:2,themes:["Ancient & Traditional"]}}],Q=[{id:"name_guru_pathik",title:e=>"Guru Pathik's Chakra Bowl",description:"A simple, vegetarian meal designed by the guru to open the body's chakras.",weighting:{fusion:!1,nations:["air-nomads","earth-kingdom"],dishTypes:["salad","soup-stew"],noMeat:!0}},{id:"name_kyoshi_warrior",title:e=>"Kyoshi Warrior's Ration",description:"A compact, high-energy meal designed for the defenders of Kyoshi Island.",weighting:{fusion:!1,nations:["earth-kingdom"],dishTypes:["snack"]}},{id:"name_avatar_roku",title:e=>"Roku's Regret",description:"A Fire Nation dish prepared with cooling Water Tribe ingredients, a somber reflection on past mistakes.",weighting:{fusion:!0,minNations:2,nations:["fire-nation","water-tribe"],themes:["Humble & Meditative"]}},{id:"name_cabbage_merchant",title:e=>"The Cabbage Merchant's Lament",description:"A simple cabbage stew. Surprisingly delicious, yet carries an inexplicable aura of sadness and misfortune.",weighting:{fusion:!1,nations:["earth-kingdom"],ingredients:["Cabbage"]}},{id:"name_admiral_zhao",title:e=>"Zhao's Conquest Feast",description:"An arrogant, overly-spiced dish, combining the finest ingredients of two nations, meant to be served after a successful invasion.",weighting:{fusion:!0,minNations:2,themes:["Ceremonial & Celebratory"],ingredients:["Pork Belly","Fire Chili"]}},{id:"name_king_bumi",title:e=>"King Bumi's Madness",description:"A dish that combines seemingly incompatible ingredients in a way that somehow works perfectly, just like the mad genius of Omashu's king.",weighting:{fusion:!0,minNations:2,themes:["Invigorating & Playful"]}},{id:"name_jet_freedom_fighter",title:e=>"Jet's Forest Stew",description:"A hearty stew made with ingredients foraged from the forest, representing the resourcefulness and determination of the Freedom Fighters.",weighting:{fusion:!1,nations:["earth-kingdom"],dishTypes:["soup-stew"],themes:["Humble & Meditative"]}},{id:"name_princess_azula",title:e=>"Azula's Precision",description:"A dish that requires exact timing and perfect technique to prepare, reflecting the princess's obsession with perfection and control.",weighting:{fusion:!1,nations:["fire-nation"],themes:["Ceremonial & Celebratory"]}},{id:"name_iroh_tea_master",title:e=>"Uncle Iroh's Wisdom",description:"A simple but profound dish that teaches patience and balance, much like the wisdom of the Dragon of the West.",weighting:{fusion:!1,nations:["fire-nation"],themes:["Humble & Meditative"]}},{id:"name_sokka_warrior",title:e=>"Sokka's Strategy",description:"A dish that combines practical nutrition with clever preparation techniques, reflecting the Water Tribe warrior's tactical mind.",weighting:{fusion:!1,nations:["water-tribe"],dishTypes:["main-course"]}}];class X{namebook;recentlyUsedNames=[];MAX_RECENT_HISTORY=8;constructor(){this.namebook=[...z,...K,...J,...V,...Y,...Q]}getName(i){const t=this.namebook.filter(o=>D(o.weighting,i));if(t.length===0)return"Cross-Cultural Medley";const a=t.map(o=>{let l=1;const{weighting:m}=o;m.nations&&m.nations.every(h=>i.fusionData.selectedNations.includes(h))&&(l+=20),m.dishTypes?.includes(i.dishType)&&(l+=8),m.ingredients?.includes(i.primaryIngredient.name)&&(l+=15),m.themes?.includes(i.theme)&&(l+=8),this.recentlyUsedNames.includes(o.id)&&(l-=80);const f=this.recentlyUsedNames.filter(h=>h===o.id).length;return f===0?l+=25:l-=f*40,{rule:o,score:l}});a.sort((o,l)=>l.score-o.score);const n=a.slice(0,3),r=a.slice(3,6),d=a.slice(0,10);let s;const c=Math.random();return c<.5&&n.length>0?s=n[Math.floor(Math.random()*n.length)]:c<.85&&r.length>0?s=r[Math.floor(Math.random()*r.length)]:s=d[Math.floor(Math.random()*d.length)],this.recentlyUsedNames.push(s.rule.id),this.recentlyUsedNames.length>this.MAX_RECENT_HISTORY&&(this.recentlyUsedNames=this.recentlyUsedNames.slice(-this.MAX_RECENT_HISTORY)),s.rule.title(i)}}const Z=[{id:"aroma_spicy_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method");return`The first impression is the aroma: a sharp, invigorating wave of ${e.primaryIngredient.flavorProfile} spice from the ${e.primaryIngredient.name.toLowerCase()}. ${i} This creates a scent that promises to awaken the senses and test one's mettle.`},weighting:{flavorProfiles:["pungent"],nations:["fire-nation"]}},{id:"aroma_herbal_enhanced",text:e=>{const i=e.primaryIngredient.location==="Generic"?"open plains and sun-warmed fields":`${e.primaryIngredient.location.toLowerCase()}`;return`A calming, herbal fragrance rises from the bowl, a scent of fresh ${e.primaryIngredient.name.toLowerCase()} that speaks of ${i}. ${e.primaryIngredient.description} This aroma promises a dish that connects diners to the natural world.`},weighting:{categories:["vegetable"],nations:["earth-kingdom","air-nomads"],compatibleForms:["stew","congee","plated"]}},{id:"aroma_savory_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique");return`The rich, savory scent of ${e.cookingStyle.name.toLowerCase()} ${e.primaryIngredient.name.toLowerCase()} is the definition of comfort. ${i} This creates a warm and welcoming aroma that promises a hearty, satisfying meal.`},weighting:{flavorProfiles:["umami","savory"],styles:["Roasting","Stewing","Braising"]}},{id:"texture_contrast_synergy",text:e=>{const i=T(e.primaryIngredient),t=T(e.secondaryIngredient),n=(e.primaryIngredient.synergies?.[e.secondaryIngredient.name]||0)>5?"creating a perfectly balanced and harmonious whole":"creating an interesting contrast of flavors";return`The genius of this dish lies in its textural synergy. The ${i} ${e.primaryIngredient.name.toLowerCase()} provides a perfect counterpoint to the ${t} bite of the ${e.secondaryIngredient.name.toLowerCase()}, ${n}.`},weighting:{fusion:!0,minIngredients:2}},{id:"texture_hearty_enhanced",text:e=>`This is a meal of substance. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method")} Each bite offers a hearty, satisfying chew, a testament to the resilient ${e.primaryIngredient.name.toLowerCase()} and the patient cooking method that makes it so tender.`,weighting:{nations:["earth-kingdom","water-tribe"],categories:["protein","base"]}},{id:"texture_light_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.fusionData.selectedNations.includes("air-nomads")?"reflecting the Air Nomad principle of detachment":"creating a fleeting but memorable experience";return`An almost weightless dish, the texture of the ${e.primaryIngredient.name.toLowerCase()} is as light as air. ${i} This results in a delicate and ethereal experience on the palate, ${t}.`},weighting:{nations:["air-nomads"],styles:["Steaming","Minimalist Assembly"]}},{id:"flavor_complex_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase();return e.secondaryIngredient.description.toLowerCase(),`The flavor is a complex journey. It begins with the ${i} of ${e.primaryIngredient.name.toLowerCase()}, builds to a peak of ${e.secondaryIngredient.flavorProfile} intensity from the ${e.secondaryIngredient.name.toLowerCase()}, and finishes with a clean, refreshing note that lingers on the palate.`},weighting:{minIngredients:3,minRarity:"Uncommon"}},{id:"flavor_simple_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase();return`Simplicity is the defining characteristic of this dish. There are no complex sauces or spices to hide behind. There is only the pure, honest, and delicious flavor of perfectly cooked ${e.primaryIngredient.name.toLowerCase()}, ${i}.`},weighting:{themes:["Humble & Meditative"],maxIngredients:2}},{id:"flavor_sweet_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase();return`A delightful dessert, this dish is a celebration of natural sweetness. The pure flavor of ${e.primaryIngredient.name.toLowerCase()} is elevated, not masked. ${i} This creates a treat that is both satisfying and light.`},weighting:{dishTypes:["dessert"]}},{id:"flavor_ingredient_specific",text:e=>`The key to this dish is how ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique")} transforms the ${e.primaryIngredient.name.toLowerCase()}. ${e.primaryIngredient.description} This careful process ensures its unique character remains the star of the dish.`,weighting:{minIngredients:1}},{id:"flavor_synergy_highlight",text:e=>{const i=e.primaryIngredient.synergies?.[e.secondaryIngredient.name]||0;return i>7?`The ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} are legendary partners in this dish. Their natural synergy creates a flavor profile that is greater than the sum of its parts, a testament to generations of culinary wisdom.`:i>3?`The ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} complement each other beautifully in this dish. Their flavors dance together, creating a harmonious balance that delights the palate.`:`The ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} create an interesting contrast in this dish. Their different characteristics work together to create a unique and memorable flavor experience.`},weighting:{minIngredients:2}}];function T(e){return e.flavorProfile==="pungent"?"sharp":e.flavorProfile==="sweet"?"delicate":e.flavorProfile==="umami"?"rich":e.flavorProfile==="savory"?"robust":e.category==="vegetable"?"crisp":e.category==="protein"?"tender":e.category==="fruit"?"juicy":e.category==="base"?"substantial":e.category==="garnish"?"bright":e.category==="dairy"?"creamy":e.category==="fungi"?"earthy":e.rarity==="Legendary"?"exquisite":e.rarity==="Rare"?"precious":e.rarity==="Uncommon"?"distinctive":"yielding"}const ee=[{id:"process_slow_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`Patience is the key ingredient. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, is simmered for hours over a low, steady heat, allowing it to become impossibly tender and absorb every drop of the flavorful broth.`},weighting:{styles:["Stewing","Braising","Simmering"],compatibleForms:["stew","congee"]}},{id:"process_fast_enhanced",text:e=>`This dish is a testament to speed and precision. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique")} A searingly hot wok, a splash of oil, and the ${e.primaryIngredient.name.toLowerCase()} is tossed for mere moments, locking in its vibrant color and crisp texture.`,weighting:{styles:["Wok-frying","Light Sauté"]}},{id:"process_fire_control_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`The mark of a master chef is their control of the flame. ${i} The coals must be just hot enough to char the outside of the ${e.primaryIngredient.name.toLowerCase()}, ${t}, creating a smoky crust while leaving the inside perfectly tender and juicy.`},weighting:{styles:["Grilling","Roasting"],nations:["fire-nation"],compatibleForms:["roast","skewer"]}},{id:"process_no_cook_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.secondaryIngredient.description.toLowerCase();return`The philosophy here is one of minimal interference. The finest ${e.primaryIngredient.name.toLowerCase()}, ${i}, and freshest ${e.secondaryIngredient.name.toLowerCase()}, ${t}, are simply assembled, dressed lightly, and served. The quality of the ingredients speaks for itself.`},weighting:{styles:["Minimalist Assembly"],compatibleForms:["salad","plated"]}},{id:"process_waterbending_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`A unique technique involving waterbending is used to flash-freeze the ${e.primaryIngredient.name.toLowerCase()}, ${t}. ${i} This creates microscopic ice crystals for an impossibly smooth texture that melts on the tongue.`},weighting:{styles:["Freezing"],nations:["water-tribe"],compatibleForms:["plated"]}},{id:"process_airbending_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`Airbending is used to ensure perfectly even cooking. ${i} A gentle, circulating current of air flows through the stone oven, resulting in a bake that is flawlessly golden-brown on all sides, perfectly showcasing the ${e.primaryIngredient.name.toLowerCase()}, ${t}.`},weighting:{styles:["Baking","Piemaking"],nations:["air-nomads"],compatibleForms:["handheld","pie"]}},{id:"process_ingredient_transformation",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase(),a=e.primaryIngredient.suitability.join(" and ");return`The key to this dish is how ${i} transforms the ${e.primaryIngredient.name.toLowerCase()}. ${t} This ingredient is particularly well-suited for ${a}, and the careful cooking process ensures its unique character remains the star.`},weighting:{minIngredients:1}},{id:"process_nation_technique",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=ie(e.fusionData.selectedNations[0]),a=e.primaryIngredient.description.toLowerCase();return`${i} ${t} The ${e.primaryIngredient.name.toLowerCase()}, ${a}, is prepared with the wisdom of generations, resulting in a dish that honors both tradition and innovation.`},weighting:{minIngredients:1}},{id:"process_synergy_creation",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method");return(e.primaryIngredient.synergies?.[e.secondaryIngredient.name]||0)>7?`${i} The legendary synergy between ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} is carefully nurtured through this cooking process, creating a dish where each ingredient elevates the other to new heights.`:`${i} The careful balance between ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} is achieved through precise timing and temperature control, ensuring both ingredients shine in their own right.`},weighting:{minIngredients:2}}];function ie(e){switch(e){case"air-nomads":return"This technique embodies the Air Nomad principle of detachment and freedom, allowing ingredients to express their natural essence.";case"water-tribe":return"This method reflects the Water Tribe's adaptability and flow, working with the natural properties of each ingredient.";case"earth-kingdom":return"This approach honors the Earth Kingdom's connection to the land and tradition, creating dishes that are both nourishing and grounding.";case"fire-nation":return"This technique demonstrates the Fire Nation's mastery of heat and control, transforming ingredients through the respectful application of power.";default:return"This method combines the best techniques from across the four nations, creating something truly unique."}}const te=[{id:"theme_ceremonial_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase();return`This is more than a meal; it's a centerpiece. The ${e.primaryIngredient.rarity==="Legendary"?"legendary":e.primaryIngredient.rarity.toLowerCase()} ${e.primaryIngredient.name.toLowerCase()}, ${i}, is prepared for festivals and ceremonies. Its presentation is as important as its taste, designed to be shared and admired by all who gather.`},weighting:{themes:["Ceremonial & Celebratory"]}},{id:"theme_humble_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=I(e.fusionData.selectedNations[0]);return`A truly humble dish, born from the principle that simple food, prepared with care and intention, can be more satisfying than the most elaborate feast. The ${e.primaryIngredient.name.toLowerCase()}, ${i}, ${t.toLowerCase()}`},weighting:{themes:["Humble & Meditative"],minRarity:"Common"}},{id:"theme_warrior_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`This is fuel for a warrior. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates a dense, high-energy meal designed to provide the strength and stamina needed for rigorous training or a long march.`},weighting:{nations:["fire-nation","water-tribe"],categories:["protein"]}},{id:"theme_traveler_enhanced",text:e=>{const i=e.primaryIngredient.location==="Generic"?"distant lands":`${e.primaryIngredient.location.toLowerCase()}`,t=e.primaryIngredient.description.toLowerCase();return`A traveler's best friend. The ${e.primaryIngredient.name.toLowerCase()}, ${t}, is easily preserved and can be cooked over an open flame with minimal fuss, providing a taste of ${i} no matter how far one has journeyed.`},weighting:{dishTypes:["snack"],styles:["Curing","Grilling"]}},{id:"theme_artisan_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`The creation of this dish is considered an art form. ${i} The precise preparation of the ${e.primaryIngredient.name.toLowerCase()}, ${t}, and the delicate balance of flavors are the marks of a true culinary artist.`},weighting:{minRarity:"Rare",styles:["Dumpling Making","Minimalist Assembly"]}},{id:"theme_fusion_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.secondaryIngredient.description.toLowerCase(),a=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique");return`This dish represents the exciting future of global cuisine. It bravely combines the ${e.primaryIngredient.flavorProfile} notes of ${e.primaryIngredient.name.toLowerCase()}, ${i}, with the ${e.secondaryIngredient.name.toLowerCase()}, ${t}. ${a} This creates a bold and unforgettable new experience that honors multiple culinary traditions.`},weighting:{fusion:!0,minNations:2}},{id:"theme_nation_heritage",text:e=>{const i=I(e.fusionData.selectedNations[0]),t=e.primaryIngredient.description.toLowerCase(),a=e.primaryIngredient.location==="Generic"?"the heart of the nation":`${e.primaryIngredient.location.toLowerCase()}`;return`${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, hails from ${a} and carries with it the wisdom and traditions of generations past. This dish honors that heritage while embracing the present moment.`},weighting:{minIngredients:1}},{id:"theme_seasonal_celebration",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.primaryIngredient.suitability.join(" and ");return`This dish celebrates the bounty of the season. The ${e.primaryIngredient.name.toLowerCase()}, ${i}, is at its peak of flavor and is particularly well-suited for ${t}. This creates a dish that captures the essence of the moment and the joy of seasonal abundance.`},weighting:{minIngredients:1}},{id:"theme_community_gathering",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, is prepared in quantities large enough to feed a community. This dish is meant to be shared, bringing people together around the table to celebrate friendship, family, and the simple joy of good food.`},weighting:{compatibleForms:["stew","congee","roast"]}}];function I(e){switch(e){case"air-nomads":return"This dish embodies the Air Nomad principle of detachment and freedom";case"water-tribe":return"This dish reflects the Water Tribe's adaptability and flow";case"earth-kingdom":return"This dish honors the Earth Kingdom's connection to the land and tradition";case"fire-nation":return"This dish demonstrates the Fire Nation's mastery of heat and control";default:return"This dish combines the best traditions from across the four nations"}}const ae=[{id:"comp_like_first_snow_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`The texture is surprisingly light, like the first snowfall of winter—it is clean, crisp, and melts away almost instantly on the tongue. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates a feeling of pure tranquility that lingers long after the last bite.`},weighting:{nations:["water-tribe"],styles:["Freezing","Poaching"]}},{id:"comp_like_warm_earth_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`Eating this dish is like the feeling of warm earth after a summer rain. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates something that is comforting, deeply savory, and feels fundamentally grounding to the spirit.`},weighting:{nations:["earth-kingdom"],categories:["base","vegetable"],styles:["Roasting","Braising","Simmering"]}},{id:"comp_like_summer_breeze_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`The flavor is like a warm summer breeze through a mountain temple; it's gentle, carries the subtle fragrance of ${e.primaryIngredient.name.toLowerCase()}, ${t}. ${i} This leaves you feeling lighter than before, as if touched by the wind itself.`},weighting:{nations:["air-nomads"],flavorProfiles:["sweet","neutral"]}},{id:"comp_like_a_spark_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`The taste is not a slow burn, but a sudden, delightful spark. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, delivers a sharp jolt of ${e.primaryIngredient.flavorProfile} flavor that instantly sharpens the mind and invigorates the body.`},weighting:{nations:["fire-nation"],flavorProfiles:["pungent"]}},{id:"comp_like_a_busy_market_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.secondaryIngredient.description.toLowerCase(),a=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique");return`This fusion dish tastes like a walk through a Republic City market. Every bite is different—a hint of ${e.primaryIngredient.name.toLowerCase()}, ${i}, here, a touch of ${e.secondaryIngredient.name.toLowerCase()}, ${t}, there. ${a} It is chaotic, but wonderfully so, a celebration of diversity and unity.`},weighting:{fusion:!0,minNations:2,minIngredients:4}},{id:"comp_like_morning_dew_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`The dish is as refreshing as morning dew on fresh leaves. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, brings a burst of pure, clean flavor that awakens the senses like the first light of dawn.`},weighting:{nations:["air-nomads"],flavorProfiles:["sweet","neutral"],themes:["Humble & Meditative"]}},{id:"comp_like_forge_heat_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`The heat builds like a blacksmith's forge—steady, intense, and purposeful. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, doesn't just burn; it transforms, bringing out depths of flavor that only fire can reveal.`},weighting:{nations:["fire-nation"],styles:["Roasting","Grilling"],flavorProfiles:["pungent"]}},{id:"comp_like_ocean_depths_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`The flavor has the depth and complexity of the ocean itself—layers upon layers of taste that reveal themselves slowly. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates secrets from the deep that unfold with each bite.`},weighting:{nations:["water-tribe"],categories:["protein"],styles:["Stewing","Poaching"]}},{id:"comp_like_ancient_stone_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`The texture is as solid and reliable as ancient stone, yet surprisingly tender. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, carries the weight of tradition and the comfort of something that has stood the test of time.`},weighting:{nations:["earth-kingdom"],categories:["base"],styles:["Braising","Simmering"]}},{id:"comp_like_spirit_world_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.secondaryIngredient.description.toLowerCase();return`Eating this dish is like catching a glimpse of the Spirit World—ethereal, otherworldly, and impossible to fully describe. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method")} The ${e.primaryIngredient.name.toLowerCase()}, ${i}, and ${e.secondaryIngredient.name.toLowerCase()}, ${t}, create flavors that seem to exist in a realm beyond ordinary taste.`},weighting:{fusion:!0,minNations:3,themes:["Ancient & Traditional"]}},{id:"comp_like_ingredient_essence",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase(),a=e.primaryIngredient.rarity==="Legendary"?"legendary":e.primaryIngredient.rarity.toLowerCase();return`The flavor is like capturing the very essence of the ${e.primaryIngredient.name.toLowerCase()}. ${i} This ${a} ingredient, ${t}, is transformed into something that tastes like the purest expression of its nature, as if you're tasting the ingredient for the first time.`},weighting:{minIngredients:1}},{id:"comp_like_nation_landscape",text:e=>{const i=e.fusionData.selectedNations[0],t=ne(i),a=e.primaryIngredient.description.toLowerCase(),n=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method");return`Eating this dish is like experiencing the landscape of ${i.split("-")[0]}. ${n} The ${e.primaryIngredient.name.toLowerCase()}, ${a}, evokes ${t}, creating a taste that transports you to another place entirely.`},weighting:{minIngredients:1}},{id:"comp_like_synergy_harmony",text:e=>{const i=e.primaryIngredient.synergies?.[e.secondaryIngredient.name]||0,t=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique");return i>7?`The flavor is like a perfectly orchestrated symphony—every note in perfect harmony. ${t} The legendary synergy between ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} creates something that is greater than the sum of its parts, like two voices becoming one.`:`The flavor is like a dance between two partners—sometimes leading, sometimes following, but always moving together. ${t} The ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} create a rhythm that is both surprising and satisfying.`},weighting:{minIngredients:2}}];function ne(e){switch(e){case"air-nomads":return"the crisp mountain air and floating temples";case"water-tribe":return"the vast, frozen tundra and endless ocean";case"earth-kingdom":return"the rolling hills and ancient forests";case"fire-nation":return"the volcanic islands and scorching deserts";default:return"distant, exotic lands"}}const re=[{id:"emo_nostalgia_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase(),a=e.primaryIngredient.location==="Generic"?"home":`${e.primaryIngredient.location.toLowerCase()}`;return`There is a powerful feeling of nostalgia to this dish. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, can transport one back to the comfort of their childhood ${a}, evoking memories of simpler times and cherished traditions.`},weighting:{themes:["Humble & Meditative","Ancient & Traditional"]}},{id:"emo_invigorating_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`This is not a meal for quiet contemplation; it is a jolt of pure energy. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, delivers sharp, ${e.primaryIngredient.flavorProfile} flavors designed to awaken the body and prepare it for action.`},weighting:{themes:["Invigorating & Playful"],nations:["fire-nation"]}},{id:"emo_serenity_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`To eat this dish is to experience a moment of profound serenity. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates flavors that are clean, balanced, and harmonious, encouraging a state of inner peace and mindfulness with every bite.`},weighting:{themes:["Humble & Meditative"],nations:["air-nomads"]}},{id:"emo_comfort_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`This is the culinary equivalent of a warm blanket on a cold night. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates a dish of pure comfort, designed to soothe the soul and fortify the spirit against the harsh world outside.`},weighting:{nations:["water-tribe","earth-kingdom"],dishTypes:["soup-stew"]}},{id:"emo_curiosity_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.secondaryIngredient.description.toLowerCase();return`This fusion dish inspires curiosity. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method")} The unexpected pairing of ${e.primaryIngredient.name.toLowerCase()}, ${i}, with ${e.secondaryIngredient.name.toLowerCase()}, ${t}, challenges convention and invites the diner to explore new culinary horizons.`},weighting:{fusion:!0,minNations:2}},{id:"emo_joy_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`This dish brings pure, unadulterated joy. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates bright flavors and playful presentation designed to make the eater smile, lifting spirits and creating a sense of celebration with every mouthful.`},weighting:{themes:["Invigorating & Playful","Ceremonial & Celebratory"]}},{id:"emo_reflection_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase();return`This meal encourages deep reflection. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, creates subtle, complex flavors that require careful attention to fully appreciate, creating a meditative experience that allows the mind to wander and contemplate.`},weighting:{themes:["Humble & Meditative"],nations:["air-nomads","water-tribe"]}},{id:"emo_courage_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique"),t=e.primaryIngredient.description.toLowerCase();return`Eating this dish requires courage. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, delivers intense, bold flavors that are not for the faint of heart, but those who dare to try it are rewarded with a sense of accomplishment and newfound bravery.`},weighting:{nations:["fire-nation"],flavorProfiles:["pungent"],themes:["Invigorating & Playful"]}},{id:"emo_gratitude_enhanced",text:e=>{const i=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method"),t=e.primaryIngredient.description.toLowerCase(),a=e.primaryIngredient.location==="Generic"?"the earth":`${e.primaryIngredient.location.toLowerCase()}`;return`This dish inspires gratitude. ${i} The ${e.primaryIngredient.name.toLowerCase()}, ${t}, hails from ${a} and reminds the eater of nature's bounty and the skill of those who prepared it, creating a sense of thankfulness for the meal.`},weighting:{themes:["Humble & Meditative"],nations:["earth-kingdom"]}},{id:"emo_wonder_enhanced",text:e=>{const i=e.primaryIngredient.description.toLowerCase(),t=e.secondaryIngredient.description.toLowerCase();return`This dish evokes a sense of wonder. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique")} The ${e.primaryIngredient.name.toLowerCase()}, ${i}, combined with ${e.secondaryIngredient.name.toLowerCase()}, ${t}, creates flavors so unexpected and delightful that it reminds the eater of the magic and mystery that still exists in the world.`},weighting:{fusion:!0,minNations:3,themes:["Ancient & Traditional"]}},{id:"emo_connection_enhanced",text:e=>{const i=oe(e.fusionData.selectedNations[0]),t=e.primaryIngredient.description.toLowerCase();return`This dish creates a deep sense of connection. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method")} ${i.toLowerCase()}. The ${e.primaryIngredient.name.toLowerCase()}, ${t}, connects the eater to the land, the people, and the traditions that brought this meal to life.`},weighting:{minIngredients:1}},{id:"emo_achievement_enhanced",text:e=>{const i=e.primaryIngredient.rarity==="Legendary"?"legendary":e.primaryIngredient.rarity.toLowerCase(),t=e.primaryIngredient.description.toLowerCase();return`Eating this dish feels like an achievement. ${e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this technique")} The ${i} ${e.primaryIngredient.name.toLowerCase()}, ${t}, represents the culmination of skill, patience, and dedication, making each bite feel like a reward for the effort that went into its creation.`},weighting:{minRarity:"Rare"}},{id:"emo_harmony_enhanced",text:e=>{const i=e.primaryIngredient.synergies?.[e.secondaryIngredient.name]||0,t=e.cookingStyle.description.toLowerCase().replace(e.cookingStyle.name.toLowerCase(),"this method");return i>7?`This dish creates a profound sense of harmony. ${t} The legendary synergy between ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} creates something that feels perfectly balanced, as if the universe itself has aligned to create this moment of culinary perfection.`:`This dish creates a sense of harmony through contrast. ${t} The ${e.primaryIngredient.name.toLowerCase()} and ${e.secondaryIngredient.name.toLowerCase()} work together despite their differences, teaching the eater that beauty often lies in the balance of opposites.`},weighting:{minIngredients:2}}];function oe(e){switch(e){case"air-nomads":return"This dish embodies the Air Nomad principle of detachment and freedom";case"water-tribe":return"This dish reflects the Water Tribe's adaptability and flow";case"earth-kingdom":return"This dish honors the Earth Kingdom's connection to the land and tradition";case"fire-nation":return"This dish demonstrates the Fire Nation's mastery of heat and control";default:return"This dish combines the best traditions from across the four nations"}}class se{descriptionbook;recentlyUsedRuleIds=[];MAX_HISTORY=10;constructor(){this.descriptionbook=[...Z,...ee,...te,...ae,...re]}addToHistory(i){this.recentlyUsedRuleIds.push(i),this.recentlyUsedRuleIds.length>this.MAX_HISTORY&&this.recentlyUsedRuleIds.shift()}getDescription(i){const{primaryIngredient:t,cookingStyle:a,theme:n,allIngredients:r}=i,d=this.descriptionbook.filter(h=>D(h.weighting,i));if(d.length===0)return`A simple and satisfying dish, notable for its use of ${t.name.toLowerCase()}.`;const s=d.map(h=>{let g=1;if(h.weighting.categories?.includes(t.category)&&(g+=20),h.weighting.flavorProfiles?.includes(t.flavorProfile)&&(g+=20),h.weighting.styles?.includes(a.name)&&(g+=15),h.weighting.themes?.includes(n)&&(g+=15),h.weighting.minRarity){const y=["Common","Uncommon","Rare","Legendary"],w=y.indexOf(h.weighting.minRarity);y.indexOf(t.rarity)>=w&&(g+=10)}h.weighting.minIngredients&&r.length>=h.weighting.minIngredients&&(g+=8),h.weighting.maxIngredients&&r.length<=h.weighting.maxIngredients&&(g+=8),h.weighting.nations?.includes(t.nation)&&(g+=25),h.weighting.fusion&&i.fusionData.selectedNations.length>1&&(g+=20),h.weighting.minNations&&i.fusionData.selectedNations.length>=h.weighting.minNations&&(g+=15),i.secondaryIngredient&&t.synergies?.[i.secondaryIngredient.name]&&t.synergies[i.secondaryIngredient.name]>5&&(g+=15),this.recentlyUsedRuleIds.includes(h.id)&&(g*=.1);const u=this.recentlyUsedRuleIds.filter(y=>y===h.id).length;return u>0&&(g*=Math.pow(.5,u)),{rule:h,score:g}});s.sort((h,g)=>g.score-h.score);const c=s.slice(0,3),o=s.slice(3,8);let l;const m=Math.random();m<.6&&c.length>0?l=c[Math.floor(Math.random()*c.length)]:m<.9&&o.length>0?l=o[Math.floor(Math.random()*o.length)]:l=s[Math.floor(Math.random()*Math.min(s.length,10))],l||(l=s[0]);const f=l.rule;return this.addToHistory(f.id),f.text(i)}}const v=e=>e[Math.floor(Math.random()*e.length)];class le{nameEngine;descriptionEngine;constructor(){this.nameEngine=new X,this.descriptionEngine=new se}generateName(i){const{selectedNations:t}=i.fusionData;if(t.length>1)return this.nameEngine.getName(i);const{nameParts:a}=i.fusionData,{primaryIngredient:n,cookingStyle:r,theme:d}=i,s=v(a.prefixes);v(a.middles);const c=n.name.split(" ")[0];let o="";switch(d){case"Ceremonial & Celebratory":o=v(["Feast","Festival","Bounty"]);break;case"Humble & Meditative":o=v(["Special","Surprise","Medley"]);break;case"Ancient & Traditional":o=r.dishSubtype;break;default:o=v(["Delight","Surprise"]);break}return`${s} ${c} ${o}`}generateDescription(i){return this.descriptionEngine.getDescription(i)}generateRationale(i){const t=[],{primaryIngredient:a,secondaryIngredient:n,cookingStyle:r,allIngredients:d,fusionData:s}=i;n&&a.synergies?.[n.name]&&t.push(`The pairing of **${a.name}** and **${n.name}** is a classic combination, creating a delightful harmony of flavors.`);const c=r.description.toLowerCase().replace(/a |an |the /i,"").replace(new RegExp(r.name,"ig"),"this technique");t.push(`The choice of **${r.name}** is key; ${c}, which perfectly suits the **${a.name}**.`);const o=d.find(m=>m.rarity==="Rare"||m.rarity==="Legendary");if(o&&i.theme==="Ceremonial & Celebratory"&&t.push(`The inclusion of the prestigious **${o.name}** marks this as a dish for special occasions, truly befitting a ceremonial feast.`),s.selectedNations.length>1){const m=s.selectedNations[0].split("-")[0].replace(/\b\w/g,h=>h.toUpperCase()),f=s.selectedNations[1].split("-")[0].replace(/\b\w/g,h=>h.toUpperCase());t.push(`This modern fusion dish bravely combines the culinary traditions of the **${m}** and the **${f}**, creating an experience that is both new and familiar.`)}const l=d.filter(m=>m.loreSnippet);if(l.length>0){const m=v(l);m&&t.push(`On **${m.name}**: *"${m.loreSnippet}"*`)}return t.sort(()=>.5-Math.random()).slice(0,3)}}const de={"air-nomads":E,"water-tribe":R,"earth-kingdom":q,"fire-nation":U},ce={"air-nomads":M,"water-tribe":G,"earth-kingdom":H,"fire-nation":O},me={"air-nomads":j,"water-tribe":B,"earth-kingdom":W,"fire-nation":x},L={"main-course":{protein:1,vegetable:2,base:1,flavoring:1},"side-dish":{vegetable:2,flavoring:1},snack:{protein:1,vegetable:1},dessert:{fruit:2,flavoring:1,garnish:1},"soup-stew":{protein:1,vegetable:2,base:1,flavoring:1},salad:{vegetable:2,garnish:1,protein:1},beverage:{fruit:1,flavoring:1}},he={"air-nomads":{"main-course":["Baking","Steaming","Light Sauté","Simmering","Piemaking"],"side-dish":["Steaming","Light Sauté","Simmering","Baking"],snack:["Minimalist Assembly","Baking","Light Sauté"],dessert:["Baking","Piemaking","Minimalist Assembly"],"soup-stew":["Simmering"],salad:["Minimalist Assembly"],beverage:["Juicing"]},"water-tribe":{"main-course":["Stewing","Grilling","Poaching","Boiling"],"side-dish":["Boiling","Poaching"],snack:["Curing","Grilling"],dessert:["Freezing"],"soup-stew":["Stewing"],salad:["Minimalist Assembly"],beverage:["Brewing"]},"earth-kingdom":{"main-course":["Roasting","Stir-frying","Braising"],"side-dish":["Stir-frying","Pickling","Steaming"],snack:["Dumpling Making","Steaming"],dessert:["Baking"],"soup-stew":["Congee Making","Braising"],salad:["Minimalist Assembly"],beverage:["Brewing"]},"fire-nation":{"main-course":["Grilling","Roasting","Wok-frying"],"side-dish":["Steaming","Wok-frying"],snack:["Grilling","Roasting"],dessert:["Baking"],"soup-stew":["Simmering"],salad:["Minimalist Assembly"],beverage:["Brewing"]}},$=e=>e[Math.floor(Math.random()*e.length)];class ge{textGenerator;ingredients=[];cookingStyles=[];fusionData;history=[];HISTORY_LIMIT=3;constructor(i){if(i.length===0)throw new Error("At least one nation must be selected.");this.textGenerator=new le,this.fusionData={selectedNations:i,nameParts:{prefixes:[],middles:[],suffixes:[]},dishEmojis:{"main-course":[],"side-dish":[],snack:[],dessert:[],"soup-stew":[],salad:[],beverage:[]}},i.forEach(t=>{const a=de[t],n=ce[t],r=me[t];this.ingredients.push(...n),this.cookingStyles.push(...r),this.fusionData.nameParts.prefixes.push(...a.nameParts.prefixes),this.fusionData.nameParts.middles.push(...a.nameParts.middles),this.fusionData.nameParts.suffixes.push(...a.nameParts.suffixes);for(const d in a.dishEmojis){const s=d;this.fusionData.dishEmojis[s].push(...a.dishEmojis[s])}}),this.ingredients=[...new Map(this.ingredients.map(t=>[t.name,t])).values()],this.cookingStyles=[...new Map(this.cookingStyles.map(t=>[t.name,t])).values()]}addToHistory(i){this.history.push({primaryIngredient:i.primaryIngredient.name,cookingStyle:i.cookingStyle.name}),this.history.length>this.HISTORY_LIMIT&&this.history.shift()}isRepetitive(i){return this.history.some(t=>t.primaryIngredient===i.primaryIngredient.name&&t.cookingStyle===i.cookingStyle.name)}generateDish(i){let t,a=0;do t=this.createLinkedContext(i),a++;while(this.isRepetitive(t)&&a<10);this.addToHistory(t);const n=this.textGenerator.generateName(t),r=this.textGenerator.generateDescription(t),d=this.textGenerator.generateRationale(t),s=this.fusionData.dishEmojis[i]||[],c=s.length>0?$(s):"❓";return{name:n,description:r,emoji:c,rationale:d,nations:this.fusionData.selectedNations,dishType:i,ingredients:t.allIngredients,cookingStyle:t.cookingStyle}}createLinkedContext(i){let t=[];if(this.fusionData.selectedNations.forEach(o=>{t.push(...he[o][i]||[])}),t=[...new Set(t)],t.length===0)throw new Error(`No valid styles for this fusion on dish type: ${i}`);const a=this.cookingStyles.filter(o=>t.includes(o.name)),n=$(a),r=this.selectIngredients(i,n),d=L[i],s=Object.values(d).reduce((o,l)=>o+l,0);if(r.length<s&&r.length<2)throw new Error("Could not select enough suitable ingredients.");return{theme:this.selectIntelligentTheme(r,n,i),primaryIngredient:r[0],secondaryIngredient:r.length>1?r[1]:r[0],cookingStyle:n,allIngredients:r,fusionData:this.fusionData,dishType:i}}selectIntelligentTheme(i,t,a){const n=i[0],r=i.some(k=>k.flavorProfile==="pungent"),d=i.some(k=>k.rarity==="Rare"||k.rarity==="Legendary"),s=this.fusionData.selectedNations.length>1,c=n.nation==="air-nomads",o=n.nation==="fire-nation",l=n.nation==="water-tribe",m=n.nation==="earth-kingdom",f=["Grilling","Roasting","Wok-frying"].includes(t.name),h=["Stewing","Braising","Simmering","Congee Making"].includes(t.name),g=["Minimalist Assembly","Steaming"].includes(t.name),u=["Dumpling Making","Piemaking","Baking"].includes(t.name),y=a==="dessert",w=a==="snack",S=a==="main-course",N=a==="soup-stew";return d||y||u?"Ceremonial & Celebratory":r||f||o||w?"Invigorating & Playful":g||c||h||N?"Humble & Meditative":m||s?"Ancient & Traditional":l&&S||h?"Humble & Meditative":f?"Invigorating & Playful":"Ancient & Traditional"}selectIngredients(i,t){const a=t.dishSubtype.toLowerCase(),n=L[i];if(!n)throw new Error(`No recipe blueprint found for dish type: ${i}`);let r=this.ingredients.filter(l=>l.suitability.includes(a)||l.suitability.includes(i));if(i==="dessert"){const l=r.filter(m=>m.flavorProfile==="sweet");l.length>2&&(r=l)}else i!=="beverage"&&(r=r.filter(l=>l.flavorProfile!=="sweet"));let s=[],c=new Set;const o=(l,m=[])=>{if(l.length===0)return;const f=l.map(u=>{let y=1;return this.fusionData.selectedNations.includes(u.nation)&&(y+=5),m.length>0&&u.synergies&&m.forEach(w=>{u.synergies[w.name]&&(y+=u.synergies[w.name])}),this.fusionData.selectedNations.length===1&&u.location!=="Generic"?y+=5:this.fusionData.selectedNations.length>1&&u.location!=="Generic"&&(y+=2),{ingredient:u,score:y}}),h=f.reduce((u,y)=>u+y.score,0);let g=Math.random()*h;for(const u of f)if(g-=u.score,g<=0)return u.ingredient;return l[0]};for(const l in n){const m=l,f=n[m];for(let h=0;h<f;h++){const g=r.filter(y=>y.category===m&&!c.has(y.name));if(g.length===0)continue;const u=o(g,s);u&&(s.push(u),c.add(u.name))}}return s}}const p={"air-nomads":{light:{"--theme-primary":"#D97706","--theme-secondary":"#FBBF24","--theme-accent":"#38BDF8","--theme-gradient-background":"linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%)","--theme-text-primary":"#422006","--theme-text-secondary":"#78350F","--theme-bg-card":"rgba(255, 251, 235, 0.9)","--theme-border-primary":"rgba(217, 119, 6, 0.2)","--dropdown-arrow-color":"#D97706","--theme-bg-primary":"linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%)","--theme-bg-secondary":"#FEF3C7","--theme-bg-overlay":"rgba(255, 251, 235, 0.95)","--theme-text-accent":"#38BDF8","--theme-border-secondary":"#FDE68A","--theme-shadow-light":"0 2px 8px rgba(217, 119, 6, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(217, 119, 6, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(217, 119, 6, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #FEF3C7 0%, #FDE68A 100%)","--theme-gradient-button":"linear-gradient(45deg, #D97706, #B45309)"},dark:{"--theme-primary":"#FBBF24","--theme-secondary":"#F87171","--theme-accent":"#67E8F9","--theme-gradient-background":"linear-gradient(135deg, #4A2B0F 0%, #2A1C0A 100%)","--theme-text-primary":"#FEF3C7","--theme-text-secondary":"#FDE68A","--theme-bg-card":"rgba(42, 28, 10, 0.9)","--theme-border-primary":"rgba(251, 191, 36, 0.3)","--dropdown-arrow-color":"#FBBF24","--theme-bg-primary":"linear-gradient(135deg, #4A2B0F 0%, #2A1C0A 100%)","--theme-bg-secondary":"#2A1C0A","--theme-bg-overlay":"rgba(42, 28, 10, 0.95)","--theme-text-accent":"#67E8F9","--theme-border-secondary":"#4A2B0F","--theme-shadow-light":"0 2px 8px rgba(251, 191, 36, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(251, 191, 36, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(251, 191, 36, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #2A1C0A 0%, #4A2B0F 100%)","--theme-gradient-button":"linear-gradient(45deg, #FBBF24, #F59E0B)","--gradient-color-1":"#4A2B0F","--gradient-color-2":"#2A1C0A"}},"water-tribe":{light:{"--theme-primary":"#0E7490","--theme-secondary":"#67E8F9","--theme-accent":"#F0F9FF","--theme-gradient-background":"linear-gradient(135deg, #E0F2FE 0%, #A5F3FC 100%)","--theme-text-primary":"#164E63","--theme-text-secondary":"#0891B2","--theme-bg-card":"rgba(240, 249, 255, 0.9)","--theme-border-primary":"rgba(14, 116, 144, 0.2)","--dropdown-arrow-color":"#0E7490","--theme-bg-primary":"linear-gradient(135deg, #E0F2FE 0%, #A5F3FC 100%)","--theme-bg-secondary":"#E0F2FE","--theme-bg-overlay":"rgba(240, 249, 255, 0.95)","--theme-text-accent":"#F0F9FF","--theme-border-secondary":"#A5F3FC","--theme-shadow-light":"0 2px 8px rgba(14, 116, 144, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(14, 116, 144, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(14, 116, 144, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #E0F2FE 0%, #A5F3FC 100%)","--theme-gradient-button":"linear-gradient(45deg, #0E7490, #0C4A6E)"},dark:{"--theme-primary":"#67E8F9","--theme-secondary":"#A5F3FC","--theme-accent":"#F0F9FF","--theme-gradient-background":"linear-gradient(135deg, #1F2937 0%, #082F49 100%)","--theme-text-primary":"#F0F9FF","--theme-text-secondary":"#A5F3FC","--theme-bg-card":"rgba(15, 23, 42, 0.9)","--theme-border-primary":"rgba(103, 232, 249, 0.3)","--dropdown-arrow-color":"#67E8F9","--theme-bg-primary":"linear-gradient(135deg, #1F2937 0%, #082F49 100%)","--theme-bg-secondary":"#082F49","--theme-bg-overlay":"rgba(15, 23, 42, 0.95)","--theme-text-accent":"#F0F9FF","--theme-border-secondary":"#1F2937","--theme-shadow-light":"0 2px 8px rgba(103, 232, 249, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(103, 232, 249, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(103, 232, 249, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #082F49 0%, #1F2937 100%)","--theme-gradient-button":"linear-gradient(45deg, #67E8F9, #06B6D4)","--gradient-color-1":"#1F2937","--gradient-color-2":"#082F49"}},"earth-kingdom":{light:{"--theme-primary":"#16A34A","--theme-secondary":"#FACC15","--theme-accent":"#A16207","--theme-gradient-background":"linear-gradient(135deg, #F0FDF4 0%, #D1FAE5 100%)","--theme-text-primary":"#14532D","--theme-text-secondary":"#15803D","--theme-bg-card":"rgba(240, 253, 244, 0.9)","--theme-border-primary":"rgba(22, 163, 74, 0.2)","--dropdown-arrow-color":"#16A34A","--theme-bg-primary":"linear-gradient(135deg, #F0FDF4 0%, #D1FAE5 100%)","--theme-bg-secondary":"#F0FDF4","--theme-bg-overlay":"rgba(240, 253, 244, 0.95)","--theme-text-accent":"#A16207","--theme-border-secondary":"#D1FAE5","--theme-shadow-light":"0 2px 8px rgba(22, 163, 74, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(22, 163, 74, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(22, 163, 74, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #F0FDF4 0%, #D1FAE5 100%)","--theme-gradient-button":"linear-gradient(45deg, #16A34A, #15803D)"},dark:{"--theme-primary":"#4ADE80","--theme-secondary":"#FDE047","--theme-accent":"#FEF08A","--theme-gradient-background":"linear-gradient(135deg, #1C1917 0%, #172513 100%)","--theme-text-primary":"#D1FAE5","--theme-text-secondary":"#A7F3D0","--theme-bg-card":"rgba(23, 37, 19, 0.9)","--theme-border-primary":"rgba(74, 222, 128, 0.3)","--dropdown-arrow-color":"#4ADE80","--theme-bg-primary":"linear-gradient(135deg, #1C1917 0%, #172513 100%)","--theme-bg-secondary":"#172513","--theme-bg-overlay":"rgba(23, 37, 19, 0.95)","--theme-text-accent":"#FEF08A","--theme-border-secondary":"#1C1917","--theme-shadow-light":"0 2px 8px rgba(74, 222, 128, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(74, 222, 128, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(74, 222, 128, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #172513 0%, #1C1917 100%)","--theme-gradient-button":"linear-gradient(45deg, #4ADE80, #22C55E)","--gradient-color-1":"#1C1917","--gradient-color-2":"#172513"}},"fire-nation":{light:{"--theme-primary":"#DC2626","--theme-secondary":"#F97316","--theme-accent":"#44403C","--theme-gradient-background":"linear-gradient(135deg, #FEF2F2 0%, #FDBA74 100%)","--theme-text-primary":"#450A0A","--theme-text-secondary":"#991B1B","--theme-bg-card":"rgba(254, 242, 242, 0.9)","--theme-border-primary":"rgba(220, 38, 38, 0.2)","--dropdown-arrow-color":"#DC2626","--theme-bg-primary":"linear-gradient(135deg, #FEF2F2 0%, #FDBA74 100%)","--theme-bg-secondary":"#FEF2F2","--theme-bg-overlay":"rgba(254, 242, 242, 0.95)","--theme-text-accent":"#44403C","--theme-border-secondary":"#FDBA74","--theme-shadow-light":"0 2px 8px rgba(220, 38, 38, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(220, 38, 38, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(220, 38, 38, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #FEF2F2 0%, #FDBA74 100%)","--theme-gradient-button":"linear-gradient(45deg, #DC2626, #B91C1C)"},dark:{"--theme-primary":"#F87171","--theme-secondary":"#FB923C","--theme-accent":"#FCD34D","--theme-gradient-background":"linear-gradient(135deg, #171717 0%, #440a0a 100%)","--theme-text-primary":"#FEE2E2","--theme-text-secondary":"#FECACA","--theme-bg-card":"rgba(30, 7, 7, 0.9)","--theme-border-primary":"rgba(248, 113, 113, 0.3)","--dropdown-arrow-color":"#F87171","--theme-bg-primary":"linear-gradient(135deg, #171717 0%, #440a0a 100%)","--theme-bg-secondary":"#440a0a","--theme-bg-overlay":"rgba(30, 7, 7, 0.95)","--theme-text-accent":"#FCD34D","--theme-border-secondary":"#171717","--theme-shadow-light":"0 2px 8px rgba(248, 113, 113, 0.1)","--theme-shadow-medium":"0 4px 15px rgba(248, 113, 113, 0.2)","--theme-shadow-heavy":"0 8px 32px rgba(248, 113, 113, 0.3)","--theme-gradient-card":"linear-gradient(145deg, #440a0a 0%, #171717 100%)","--theme-gradient-button":"linear-gradient(45deg, #F87171, #EF4444)","--gradient-color-1":"#171717","--gradient-color-2":"#440a0a"}}};class C{static currentNations=["air-nomads"];static currentMode="light";static initialize(){const i=window.matchMedia("(prefers-color-scheme: dark)").matches;this.currentMode=i?"dark":"light",this.setNations(this.currentNations)}static setNations(i){i.length===0?this.currentNations=["air-nomads"]:this.currentNations=i;const t=this.generateDynamicTheme(this.currentNations,this.currentMode);this.applyTheme(t)}static toggleLightDark(){this.currentMode=this.currentMode==="light"?"dark":"light",this.setNations(this.currentNations)}static applyTheme(i){const t=document.documentElement,a=document.body;for(const[n,r]of Object.entries(i))t.style.setProperty(n,r);a.className="",this.currentNations.forEach(n=>{a.classList.add(`theme-${n}`)}),a.dataset.theme=this.currentMode}static generateDynamicTheme(i,t){if(i.length<=1){const c=i[0]||"air-nomads";return p[c][t]}const a={...p[i[0]][t]},n=t==="dark"?i.map(c=>p[c][t]["--gradient-color-1"]):i.map(c=>p[c][t]["--theme-primary"]),r=i.map(c=>p[c][t]["--theme-primary"]),d=t==="dark"?i.map(c=>p[c][t]["--gradient-color-2"]):i.map(c=>p[c][t]["--theme-secondary"]);a["--theme-gradient-background"]=`linear-gradient(135deg, ${n.join(", ")})`,a["--theme-gradient-button"]=`linear-gradient(45deg, ${r.join(", ")})`,a["--theme-bg-card"]=`linear-gradient(145deg, ${d.join(", ")})`,a["--theme-bg-secondary"]=`linear-gradient(145deg, ${d.join(", ")})`,t==="dark"?(a["--theme-text-primary"]="#F0F9FF",a["--theme-text-secondary"]="#A5F3FC"):(a["--theme-text-primary"]="#164E63",a["--theme-text-secondary"]="#0891B2");const s=i.map(c=>p[c][t]["--theme-primary"]);return a["--theme-primary"]=s[0],a["--theme-secondary"]=s[1]||s[0],a["--theme-accent"]=s[2]||s[1]||s[0],a["--dropdown-arrow-color"]=s[0],a}}const ue=["The spirits are cooking...","Consulting the ancient recipes...","Adding a dash of honor!","Slicing cabbages... carefully.","Waiting for the stew to simmer.","Perfecting the tea blend.","That's a sharp outfit, Chan. Careful, you could puncture the hull of an empire-class Fire Nation battle ship, leaving thousands to drown at sea... because it's so sharp.","Tasting for poisonous fungi...","My cabbages!!","Harnessing the flame's energy.","Balancing the flavors of the four nations.","Is this... cactus juice?","Secret tunnel! Through the mountain!"],_=e=>e[Math.floor(Math.random()*e.length)],ye=["🥕","🍄","🌿","🌶️","🥩","🐟","🥬","🧅","🥔","🍚","🍜","🥟"];class F{static generateButton;static nationChecklistContainer;static dishTypeSelector;static dishContainer;static themeToggleButton;static loadingOverlay;static loadingQuoteElement;static fallingIngredientsContainer;static nationCheckboxes;static selectedNations=["air-nomads"];static selectedDishType="main-course";static initialize(){if(this.generateButton=document.getElementById("generate-button"),this.nationChecklistContainer=document.getElementById("nation-checklist-container"),this.dishTypeSelector=document.getElementById("dish-type-selector"),this.dishContainer=document.getElementById("dish-container"),this.themeToggleButton=document.getElementById("theme-toggle"),this.loadingOverlay=document.getElementById("loading-overlay"),this.loadingQuoteElement=document.getElementById("loading-quote"),this.fallingIngredientsContainer=document.getElementById("falling-ingredients"),this.nationCheckboxes=document.querySelectorAll('input[name="nation"]'),!this.generateButton||!this.nationChecklistContainer||!this.dishTypeSelector||!this.dishContainer||!this.themeToggleButton||!this.loadingOverlay||!this.loadingQuoteElement||!this.fallingIngredientsContainer){console.error("A critical UI element could not be found. Aborting initialization.");return}this.attachEventListeners(),this.setupNationChecklist(),this.setupCustomSelect(this.dishTypeSelector,this.handleDishTypeChange.bind(this))}static attachEventListeners(){this.generateButton.addEventListener("click",()=>this.handleGenerateClick()),this.themeToggleButton.addEventListener("click",()=>{C.toggleLightDark(),this.updateThemeUI()}),document.addEventListener("click",i=>{i.target.closest(".custom-dish-type-selector")||document.querySelectorAll(".dropdown-options.show").forEach(n=>{n.classList.remove("show"),n.previousElementSibling?.classList.remove("open")})}),this.nationCheckboxes.forEach(i=>{i.addEventListener("change",()=>this.handleNationChange())})}static updateThemeUI(){const i=document.body.dataset.theme==="dark";this.themeToggleButton.textContent=i?"🌙":"☀️"}static handleGenerateClick(){this.generateButton.disabled=!0,this.loadingOverlay.classList.add("show"),this.fallingIngredientsContainer.innerHTML="";const i=1800,t=5,a=i/(t+1);for(let n=0;n<t;n++)setTimeout(()=>{this.dropIngredient(),n===Math.floor(t/2)&&(this.loadingQuoteElement.style.opacity="0",setTimeout(()=>{this.loadingQuoteElement.textContent=_(ue.filter(r=>r!==this.loadingQuoteElement.textContent)),this.loadingQuoteElement.style.opacity="1"},150))},n*a);setTimeout(()=>{try{const r=new ge(this.selectedNations).generateDish(this.selectedDishType);this.renderDish(r),this.triggerAnimations()}catch(n){console.error("Failed to generate dish:",n),this.renderError(n)}finally{this.loadingOverlay.classList.remove("show"),this.generateButton.disabled=!1}},i)}static dropIngredient(){const i=document.createElement("span");i.className="falling-ingredient",i.textContent=_(ye);const t=Math.random()*80+10,a=Math.random()*90-45;i.style.left=`${t}%`,i.style.transform=`rotate(${a}deg)`,this.fallingIngredientsContainer.appendChild(i),setTimeout(()=>{i.remove()},1500)}static handleDishTypeChange(i){this.selectedDishType=i,console.log(`Dish type changed to: ${this.selectedDishType}`)}static handleNationChange(){if(this.selectedNations=Array.from(this.nationCheckboxes).filter(i=>i.checked).map(i=>i.value),this.selectedNations.length===0){const i=Array.from(this.nationCheckboxes).find(t=>!t.checked);i&&(i.checked=!0,this.selectedNations.push(i.value))}this.nationCheckboxes.forEach(i=>{i.disabled=this.selectedNations.length===1&&i.checked}),C.setNations(this.selectedNations)}static renderDish(i){const t=i.ingredients.map((r,d)=>`
      <li class="ingredient-item reveal" style="--delay: ${d*100}ms;">
        <span class="ingredient-emoji">${r.emoji}</span>
        <span class="ingredient-name">${r.name}</span>
        <span class="ingredient-separator">•</span>
        <span class="rarity-pill rarity-${r.rarity.toLowerCase()}">${r.rarity}</span>
      </li>
    `).join(""),a=i.nations.map(r=>{const d=r.replace("-"," ").replace(/\b\w/g,s=>s.toUpperCase());return`<span class="nation-pill nation-pill--${r}">${d}</span>`}).join(""),n=`
      <div class="dish-display parchment-layout">
        <div class="dish-header reveal" style="--delay: 0ms;">
          <span class="dish-emoji">${i.emoji}</span>
          <div class="dish-title-container">
            <h2>${i.name}</h2>
          </div>
        </div>
        <div class="nation-pills-container reveal" style="--delay: 50ms;">
          ${a}
        </div>
        
        <div class="dish-main-content">
          <div class="content-section description-section callout-box reveal" style="--delay: 150ms;">
            <h3>Description</h3>
            <p>${i.description}</p>
          </div>

          <div class="content-section ingredients-section reveal" style="--delay: 200ms;">
            <h3>Ingredients</h3>
            <ul>${t}</ul>
          </div>

          <div class="content-section technique-section callout-box reveal" style="--delay: 250ms;">
            <h3>Technique</h3>
            <p><strong>${i.cookingStyle.name}:</strong> ${i.cookingStyle.description}</p>
          </div>

          <!-- CHEF'S NOTES / RATIONALE SECTION -->
          ${i.rationale.length>0?`
            <div class="content-section rationale-section reveal" style="--delay: 300ms;">
              <div class="rationale-inner">
                <h3>Chef's Notes</h3>
                <ul>
                  ${i.rationale.map(r=>`<li>${r.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}</li>`).join("")}
                </ul>
              </div>
            </div>
          `:""}
        </div>
      </div>
    `;this.dishContainer.innerHTML=n}static renderIngredient(i){const t=`rarity-${i.rarity.toLowerCase()}`,a=`<span class="rarity-dot ${i.rarity.toLowerCase()}">●</span>`;return`
          <div class="ingredient-item-grouped ${t}">
              <span class="ingredient-emoji">${i.emoji}</span>
              <span class="ingredient-name">${i.name}</span>
              <span class="ingredient-rarity">${a} ${i.rarity}</span>
          </div>
      `}static renderError(i){const t=`
        <div class="error-message">
            <h3>Oops! Something went wrong</h3>
            <p>${i.message}</p>
            <small>Try selecting different nations or dish types.</small>
            <button class="retry-button" onclick="location.reload()">Try Again</button>
        </div>
    `;this.dishContainer.innerHTML=t}static setupCustomSelect(i,t){const a=i.querySelector(".selected-option"),n=i.querySelector(".dropdown-options"),r=a.querySelector(".selected-option-content"),d=Array.from(n.querySelectorAll(".option"));if(!a||!n||!r)return;const s=i.dataset.value,c=d.find(o=>o.dataset.value===s);c&&(r.innerHTML=c.innerHTML),a.addEventListener("click",o=>{if(o.target.closest(".dropdown-options"))return;o.stopPropagation(),document.querySelectorAll(".dropdown-options.show").forEach(m=>{m!==n&&(m.classList.remove("show"),m.previousElementSibling?.classList.remove("open"))}),a.classList.contains("open")?(a.classList.remove("open"),n.classList.remove("show")):(a.classList.add("open"),n.classList.add("show"))}),d.forEach(o=>{o.addEventListener("pointerdown",l=>{l.stopPropagation();const m=o.dataset.value;i.dataset.value!==m&&(r.innerHTML=o.innerHTML,i.dataset.value=m,t(m)),a.classList.remove("open"),n.classList.remove("show")})}),n.addEventListener("click",o=>o.stopPropagation())}static setupNationChecklist(){this.handleNationChange()}static triggerAnimations(){const i=this.dishContainer.querySelectorAll(".reveal");setTimeout(()=>{i.forEach(t=>{t.classList.add("animate")})},100)}}document.addEventListener("DOMContentLoaded",()=>{C.initialize(),F.initialize(),F.updateThemeUI(),console.log("Avatar Culinary Dish Generator Initialized!")});
